{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { mapActions, mapState } from 'vuex';\nimport { getUserInfo, updateUserInfo, getUserPoints, getPointsHistory, rechargePoints } from '@/utils/api';\nexport default {\n  name: 'UserProfile',\n  data() {\n    return {\n      avatar: 'https://via.placeholder.com/150',\n      loading: true,\n      userInfo: {\n        user_id: null,\n        user_name: '',\n        email: '',\n        phone: '',\n        gender: null,\n        age: null,\n        birthday: null,\n        organization: '',\n        profile: '',\n        points: 0,\n        created_at: null,\n        updated_at: null\n      },\n      interestModules: ['ç¼–ç¨‹', 'æ—…æ¸¸', 'å¥èº«'],\n      friends: ['ä½•é›¯å®', 'è®¸æ˜•æ ¼', 'ç‹åŠ æ·»'],\n      favoriteRobots: ['R2-D2', 'C-3PO', 'Optimus Prime'],\n      favoriteTools: ['VS Code', 'Sublime Text', 'WebStorm'],\n      // ç¼–è¾‘å¯¹è¯æ¡†ç›¸å…³\n      editDialogVisible: false,\n      saveLoading: false,\n      editForm: {\n        UserName: '',\n        Email: '',\n        Phone: '',\n        Gender: null,\n        Age: null,\n        Birthday: null,\n        Organization: '',\n        Profile: '',\n        Password: '' // æ·»åŠ å¯†ç å­—æ®µ\n      },\n      editRules: {\n        UserName: [{\n          required: true,\n          message: 'è¯·è¾“å…¥ç”¨æˆ·å',\n          trigger: 'blur'\n        }, {\n          min: 3,\n          max: 20,\n          message: 'ç”¨æˆ·åé•¿åº¦åº”ä¸º3-20ä¸ªå­—ç¬¦',\n          trigger: 'blur'\n        }],\n        Organization: [{\n          max: 100,\n          message: 'æœºæ„åç§°ä¸èƒ½è¶…è¿‡100ä¸ªå­—ç¬¦',\n          trigger: 'blur'\n        }],\n        Profile: [{\n          max: 500,\n          message: 'ä¸ªäººç®€ä»‹ä¸èƒ½è¶…è¿‡500ä¸ªå­—ç¬¦',\n          trigger: 'blur'\n        }],\n        Password: [{\n          required: true,\n          message: 'è¯·è¾“å…¥å½“å‰å¯†ç ',\n          trigger: 'blur'\n        }, {\n          min: 6,\n          message: 'å¯†ç é•¿åº¦è‡³å°‘6ä½',\n          trigger: 'blur'\n        }]\n      },\n      // ç§¯åˆ†æ˜ç»†ç›¸å…³\n      pointsHistoryDialogVisible: false,\n      pointsLoading: false,\n      currentPointsTab: 'all',\n      // å½“å‰é€‰ä¸­çš„ç§¯åˆ†æ ‡ç­¾é¡µ\n      currentPointsPage: 1,\n      // å½“å‰é¡µç \n      pointsPageSize: 5,\n      // æ¯é¡µæ˜¾ç¤ºçš„è®°å½•æ•°\n      pointsData: [],\n      // ç§¯åˆ†è®°å½•æ•°æ®\n\n      // å……å€¼ç§¯åˆ†ç›¸å…³\n      rechargeDialogVisible: false,\n      rechargeLoading: false,\n      rechargeForm: {\n        points: 100,\n        description: 'ç”¨æˆ·å……å€¼ç§¯åˆ†'\n      },\n      rechargeRules: {\n        points: [{\n          required: true,\n          message: 'è¯·è¾“å…¥å……å€¼ç§¯åˆ†æ•°é‡',\n          trigger: 'blur'\n        }, {\n          type: 'number',\n          min: 10,\n          max: 10000,\n          message: 'å……å€¼ç§¯åˆ†éœ€åœ¨10-10000ä¹‹é—´',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  computed: {\n    ...mapState('user', ['userId', 'userName']),\n    // ç§¯åˆ†æ˜ç»†ç›¸å…³è®¡ç®—å±æ€§\n    filteredPointsData() {\n      if (this.currentPointsTab === 'all') {\n        return this.pointsData;\n      } else if (this.currentPointsTab === 'in') {\n        return this.pointsData.filter(item => item.badge === 'in');\n      } else if (this.currentPointsTab === 'out') {\n        return this.pointsData.filter(item => item.badge === 'out');\n      }\n      return this.pointsData;\n    },\n    paginatedPointsData() {\n      const start = (this.currentPointsPage - 1) * this.pointsPageSize;\n      const end = start + this.pointsPageSize;\n      return this.filteredPointsData.slice(start, end);\n    },\n    totalPointsPages() {\n      return Math.ceil(this.filteredPointsData.length / this.pointsPageSize);\n    }\n  },\n  async created() {\n    await this.loadUserInfo();\n  },\n  methods: {\n    ...mapActions('user', ['logout']),\n    // ç™»å‡ºåŠŸèƒ½\n    handleLogout() {\n      this.$confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ', 'ç¡®è®¤é€€å‡º', {\n        confirmButtonText: 'ç¡®å®š',\n        cancelButtonText: 'å–æ¶ˆ',\n        type: 'warning'\n      }).then(async () => {\n        try {\n          // è°ƒç”¨storeä¸­çš„logout action\n          await this.logout();\n          this.$message.success('å·²æˆåŠŸé€€å‡ºç™»å½•');\n\n          // è·³è½¬åˆ°ç™»å½•é¡µé¢æˆ–é¦–é¡µ\n          this.$router.push('/').catch(() => {\n            // å¦‚æœæ²¡æœ‰ç™»å½•é¡µé¢ï¼Œè·³è½¬åˆ°é¦–é¡µ\n            this.$router.push('/');\n          });\n        } catch (error) {\n          console.error('é€€å‡ºç™»å½•å¤±è´¥:', error);\n          this.$message.error('é€€å‡ºç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•');\n        }\n      }).catch(() => {\n        // ç”¨æˆ·å–æ¶ˆç™»å‡ºï¼Œä¸éœ€è¦å¤„ç†\n      });\n    },\n    async loadUserInfo() {\n      try {\n        this.loading = true;\n        console.log('å½“å‰ç”¨æˆ·çŠ¶æ€:', {\n          userId: this.userId,\n          userName: this.userName,\n          isLoggedIn: this.$store.state.user.isLoggedIn\n        });\n        if (this.userId) {\n          // åŠ è½½ç”¨æˆ·åŸºæœ¬ä¿¡æ¯\n          const response = await getUserInfo(this.userId);\n          this.userInfo = response.data;\n          console.log('ç”¨æˆ·ä¿¡æ¯åŠ è½½æˆåŠŸ:', this.userInfo);\n\n          // å•ç‹¬åŠ è½½ç§¯åˆ†ä¿¡æ¯ï¼ˆæ ¹æ®åç«¯æ–‡æ¡£ï¼Œç§¯åˆ†éœ€è¦å•ç‹¬è·å–ï¼‰\n          try {\n            const pointsResponse = await getUserPoints();\n            this.userInfo.points = this.validateAndFormatPoints(pointsResponse.data.points);\n            console.log('ç§¯åˆ†ä¿¡æ¯åŠ è½½æˆåŠŸ:', this.userInfo.points);\n          } catch (pointsError) {\n            console.warn('ç§¯åˆ†ä¿¡æ¯åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤å€¼0:', pointsError);\n            this.userInfo.points = 0;\n          }\n        } else {\n          console.log('userIdä¸ºç©ºï¼Œå½“å‰storeçŠ¶æ€:', this.$store.state.user);\n          this.$message.error('ç”¨æˆ·IDä¸å­˜åœ¨ï¼Œè¯·é‡æ–°ç™»å½•');\n        }\n      } catch (error) {\n        console.error('åŠ è½½ç”¨æˆ·ä¿¡æ¯å¤±è´¥:', error);\n        this.$message.error('åŠ è½½ç”¨æˆ·ä¿¡æ¯å¤±è´¥ï¼š' + (error.message || 'æœªçŸ¥é”™è¯¯'));\n      } finally {\n        this.loading = false;\n      }\n    },\n    validateAndFormatPoints(points) {\n      // éªŒè¯å’Œæ ¼å¼åŒ–ç§¯åˆ†æ•°æ®\n      if (typeof points === 'number' && points >= 0) {\n        return Math.floor(points); // ç¡®ä¿æ˜¯æ•´æ•°\n      }\n      return 0; // é»˜è®¤å€¼\n    },\n    getGenderText(gender) {\n      const genderMap = {\n        1: 'ç”·',\n        2: 'å¥³',\n        0: 'å…¶ä»–'\n      };\n      return genderMap[gender] || 'æœªè®¾ç½®';\n    },\n    formatDate(dateString) {\n      if (!dateString) return 'æœªçŸ¥';\n      return new Date(dateString).toLocaleString('zh-CN');\n    },\n    formatBirthday(dateString) {\n      if (!dateString) return 'æœªè®¾ç½®';\n      return new Date(dateString).toLocaleDateString('zh-CN');\n    },\n    // ç§¯åˆ†ç›¸å…³æ–¹æ³• - ä»…ç”¨äºè´­ä¹°æœºå™¨äºº\n    // å·²åˆ é™¤ä¼šå‘˜ç­‰çº§ç›¸å…³æ–¹æ³•\n\n    earnPointsDialog() {\n      this.$msgbox({\n        title: 'ç§¯åˆ†ç”¨é€”',\n        message: `\n          <div>\n            <p>ï¿½ <strong>ç§¯åˆ†å¯ç”¨äºï¼š</strong></p>\n            <ul>\n              <li>ğŸ¤– è´­ä¹°æœºå™¨äººåŠŸèƒ½</li>\n              <li>ğŸ›’ æœºå™¨äººå¸‚åœºæ¶ˆè´¹</li>\n              <li>â­ è§£é”é«˜çº§æœºå™¨äºº</li>\n            </ul>\n            <br>\n            <p>ï¿½ğŸ’¡ <strong>å¦‚ä½•è·å–ç§¯åˆ†ï¼š</strong></p>\n            <ul>\n              <li>ğŸ¤– åˆ›å»ºæœºå™¨äººï¼š+50ç§¯åˆ†</li>\n              <li>ğŸ’¬ å‘è¡¨è¯„è®ºï¼š+10ç§¯åˆ†</li>\n              <li>ğŸ‘ è·å¾—ç‚¹èµï¼š+5ç§¯åˆ†</li>\n              <li>ğŸ“ å‘è¡¨æ–‡ç« ï¼š+30ç§¯åˆ†</li>\n              <li>ğŸ“… æ¯æ—¥ç­¾åˆ°ï¼š+10ç§¯åˆ†</li>\n            </ul>\n          </div>\n        `,\n        dangerouslyUseHTMLString: true,\n        showCancelButton: false,\n        confirmButtonText: 'çŸ¥é“äº†'\n      });\n    },\n    // ç¼–è¾‘ç”¨æˆ·ä¿¡æ¯ç›¸å…³æ–¹æ³•\n    openEditDialog() {\n      this.editForm = {\n        UserName: this.userInfo.user_name || '',\n        Email: this.userInfo.email || '',\n        Phone: this.userInfo.phone || '',\n        Gender: this.userInfo.gender,\n        Age: this.userInfo.age,\n        Birthday: this.userInfo.birthday || null,\n        Organization: this.userInfo.organization || '',\n        Profile: this.userInfo.profile || '',\n        Password: '' // é‡ç½®å¯†ç å­—æ®µ\n      };\n      this.editDialogVisible = true;\n    },\n    resetEditForm() {\n      if (this.$refs.editForm) {\n        this.$refs.editForm.resetFields();\n      }\n    },\n    async saveUserInfo() {\n      try {\n        await this.$refs.editForm.validate();\n        this.saveLoading = true;\n\n        // è½¬æ¢ä¸ºåç«¯æœŸæœ›çš„æ ¼å¼\n        const updateData = {\n          NewUsername: this.editForm.UserName,\n          NewGender: this.editForm.Gender,\n          NewAge: this.editForm.Age,\n          Password: this.editForm.Password // éœ€è¦æ·»åŠ å¯†ç å­—æ®µ\n        };\n        console.log('å‡†å¤‡æ›´æ–°çš„æ•°æ®:', updateData);\n        console.log('ç”¨æˆ·ID:', this.userId);\n        const response = await updateUserInfo(this.userId, updateData);\n        console.log('APIå“åº”:', response);\n\n        // æ£€æŸ¥ä¸åŒçš„å“åº”æ ¼å¼\n        if (response && response.data) {\n          // å¦‚æœæœ‰dataå­—æ®µï¼Œæ£€æŸ¥dataä¸­çš„success\n          if (response.data.success !== false) {\n            this.$message.success('ä¸ªäººä¿¡æ¯æ›´æ–°æˆåŠŸï¼');\n            this.editDialogVisible = false;\n            await this.loadUserInfo(); // é‡æ–°åŠ è½½ç”¨æˆ·ä¿¡æ¯\n            return;\n          } else {\n            throw new Error(response.data.message || response.data.error || 'æ›´æ–°å¤±è´¥');\n          }\n        } else if (response && response.success !== false && response.status !== 'error') {\n          // ç›´æ¥æ£€æŸ¥å“åº”å¯¹è±¡\n          this.$message.success('ä¸ªäººä¿¡æ¯æ›´æ–°æˆåŠŸï¼');\n          this.editDialogVisible = false;\n          await this.loadUserInfo();\n          return;\n        } else {\n          throw new Error(response.message || response.error || 'æœåŠ¡å™¨è¿”å›æ›´æ–°å¤±è´¥');\n        }\n      } catch (error) {\n        console.error('ä¿å­˜ç”¨æˆ·ä¿¡æ¯è¯¦ç»†é”™è¯¯:', error);\n        console.error('é”™è¯¯å“åº”:', error.response);\n        let errorMessage = 'è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥';\n        if (error.response) {\n          // æœåŠ¡å™¨è¿”å›äº†é”™è¯¯çŠ¶æ€ç \n          if (error.response.data) {\n            errorMessage = error.response.data.message || error.response.data.error || `æœåŠ¡å™¨é”™è¯¯ (${error.response.status})`;\n          } else {\n            errorMessage = `ç½‘ç»œé”™è¯¯ (${error.response.status})`;\n          }\n        } else if (error.message) {\n          // å…¶ä»–é”™è¯¯ï¼ˆåŒ…æ‹¬æˆ‘ä»¬æ‰‹åŠ¨æŠ›å‡ºçš„é”™è¯¯ï¼‰\n          errorMessage = error.message;\n        }\n        this.$message.error('ä¿å­˜å¤±è´¥ï¼š' + errorMessage);\n      } finally {\n        this.saveLoading = false;\n      }\n    },\n    // ç§¯åˆ†æ˜ç»†ç›¸å…³æ–¹æ³•\n    viewPointsHistory() {\n      this.pointsHistoryDialogVisible = true;\n      this.loadPointsHistory();\n    },\n    async loadPointsHistory() {\n      this.pointsLoading = true;\n      try {\n        // è°ƒç”¨çœŸå®çš„APIè·å–ç§¯åˆ†è®°å½•\n        const response = await getPointsHistory(this.currentPointsPage, this.pointsPageSize);\n        console.log('ç§¯åˆ†è®°å½•APIå“åº”:', response);\n        if (response && response.data) {\n          // å¤„ç†APIè¿”å›çš„æ•°æ®\n          let records = response.data.records || response.data || [];\n          console.log('åŸå§‹è®°å½•æ•°æ®:', records);\n          console.log('ç¬¬ä¸€æ¡è®°å½•ç»“æ„:', records[0]);\n\n          // å¦‚æœAPIè¿”å›çš„æ˜¯æ•°ç»„ï¼Œç›´æ¥ä½¿ç”¨\n          if (Array.isArray(records)) {\n            // è½¬æ¢æ•°æ®æ ¼å¼ä»¥åŒ¹é…æ¨¡æ¿\n            this.pointsData = records.map(record => {\n              console.log('æ­£åœ¨å¤„ç†è®°å½•:', record);\n\n              // æ ¹æ®åç«¯APIè¿”å›çš„å­—æ®µåè·å–å€¼\n              const pointsChange = record.points_change || record.change_amount || record.amount || record.points || 0;\n              const transactionType = record.transaction_type || record.change_type || record.type || 'unknown';\n\n              // åˆ¤æ–­æ˜¯è·å–è¿˜æ˜¯æ¶ˆè€—ç§¯åˆ†\n              const isEarn = pointsChange > 0 || transactionType === 'earn' || transactionType === 'PURCHASE';\n              return {\n                id: record.transaction_id || record.id || record.point_id || Math.random(),\n                type: isEarn ? 'è·å–' : 'æ¶ˆè€—',\n                badge: isEarn ? 'in' : 'out',\n                change: pointsChange > 0 ? `+${pointsChange}` : pointsChange.toString(),\n                desc: record.source_description || record.description || record.reason || record.desc || 'ç§¯åˆ†å˜åŠ¨',\n                time: record.transaction_date || record.created_at || record.timestamp || record.time || new Date().toLocaleString()\n              };\n            });\n            console.log('è½¬æ¢åçš„ç§¯åˆ†æ•°æ®:', this.pointsData);\n          } else {\n            console.warn('APIè¿”å›çš„æ•°æ®æ ¼å¼ä¸æ˜¯æ•°ç»„:', records);\n            this.pointsData = this.getMockPointsData();\n          }\n        } else {\n          console.warn('APIè¿”å›æ•°æ®ä¸ºç©ºï¼Œä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®');\n          this.pointsData = this.getMockPointsData();\n        }\n      } catch (error) {\n        console.error('åŠ è½½ç§¯åˆ†è®°å½•å¤±è´¥:', error);\n        console.error('é”™è¯¯è¯¦æƒ…:', error.response);\n\n        // APIè°ƒç”¨å¤±è´¥æ—¶æ‰ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®\n        this.$message.warning('æ— æ³•åŠ è½½ç§¯åˆ†è®°å½•ï¼Œæ˜¾ç¤ºç¤ºä¾‹æ•°æ®');\n        this.pointsData = this.getMockPointsData();\n      } finally {\n        this.pointsLoading = false;\n      }\n    },\n    switchPointsTab(tabName) {\n      this.currentPointsTab = tabName;\n      this.currentPointsPage = 1; // åˆ‡æ¢æ ‡ç­¾é¡µæ—¶é‡ç½®é¡µç \n      this.loadPointsHistory();\n    },\n    handlePointsPageChange(page) {\n      this.currentPointsPage = page;\n      this.loadPointsHistory();\n    },\n    getMockPointsData() {\n      const allData = [{\n        id: 1,\n        type: 'è·å–',\n        badge: 'in',\n        change: '+50',\n        desc: 'åˆ›å»ºæœºå™¨äººå¥–åŠ±',\n        time: '2024-01-15 10:30:00'\n      }, {\n        id: 2,\n        type: 'æ¶ˆè€—',\n        badge: 'out',\n        change: '-30',\n        desc: 'è´­ä¹°é«˜çº§åŠŸèƒ½',\n        time: '2024-01-14 15:45:00'\n      }, {\n        id: 3,\n        type: 'è·å–',\n        badge: 'in',\n        change: '+10',\n        desc: 'æ¯æ—¥ç­¾åˆ°å¥–åŠ±',\n        time: '2024-01-14 09:00:00'\n      }, {\n        id: 4,\n        type: 'è·å–',\n        badge: 'in',\n        change: '+30',\n        desc: 'å‘è¡¨æ–‡ç« å¥–åŠ±',\n        time: '2024-01-13 14:20:00'\n      }, {\n        id: 5,\n        type: 'æ¶ˆè€—',\n        badge: 'out',\n        change: '-20',\n        desc: 'è´­ä¹°æœºå™¨äºº',\n        time: '2024-01-12 11:10:00'\n      }, {\n        id: 6,\n        type: 'è·å–',\n        badge: 'in',\n        change: '+5',\n        desc: 'è·å¾—ç‚¹èµå¥–åŠ±',\n        time: '2024-01-11 16:30:00'\n      }];\n\n      // æ ¹æ®å½“å‰æ ‡ç­¾é¡µè¿‡æ»¤æ•°æ®\n      if (this.currentPointsTab === 'in') {\n        return allData.filter(item => item.badge === 'in');\n      } else if (this.currentPointsTab === 'out') {\n        return allData.filter(item => item.badge === 'out');\n      }\n      return allData;\n    },\n    formatPointsAmount(amount) {\n      return amount > 0 ? `+${amount}` : amount.toString();\n    },\n    getPointsTypeClass(type) {\n      return type === 'in' ? 'points-in' : 'points-out';\n    },\n    // ç§¯åˆ†å¯¹è¯æ¡†ç›¸å…³æ–¹æ³•\n    resetPointsHistory() {\n      this.currentPointsPage = 1;\n      this.currentPointsTab = 'all';\n      this.pointsData = [];\n    },\n    changePointsPage(page) {\n      this.currentPointsPage = page;\n    },\n    // å……å€¼ç§¯åˆ†ç›¸å…³æ–¹æ³•\n    openRechargeDialog() {\n      this.rechargeDialogVisible = true;\n      this.resetRechargeForm();\n    },\n    resetRechargeForm() {\n      if (this.$refs.rechargeForm) {\n        this.$refs.rechargeForm.resetFields();\n      }\n      this.rechargeForm = {\n        points: 100,\n        description: 'ç”¨æˆ·å……å€¼ç§¯åˆ†'\n      };\n    },\n    setQuickAmount(amount) {\n      this.rechargeForm.points = amount;\n    },\n    async submitRecharge() {\n      try {\n        await this.$refs.rechargeForm.validate();\n        this.rechargeLoading = true;\n        console.log('å‡†å¤‡å……å€¼ç§¯åˆ†:', this.rechargeForm);\n        const response = await rechargePoints(this.rechargeForm.points, this.rechargeForm.description);\n        console.log('å……å€¼å“åº”:', response);\n        if (response && response.data) {\n          this.$message.success(`å……å€¼æˆåŠŸï¼è·å¾— ${this.rechargeForm.points} ç§¯åˆ†ï¼Œå½“å‰ä½™é¢: ${response.data.new_balance}`);\n\n          // æ›´æ–°ç”¨æˆ·ç§¯åˆ†æ˜¾ç¤º\n          this.userInfo.points = response.data.new_balance;\n\n          // å…³é—­å¯¹è¯æ¡†\n          this.rechargeDialogVisible = false;\n\n          // å¦‚æœç§¯åˆ†æ˜ç»†å¯¹è¯æ¡†æ˜¯æ‰“å¼€çš„ï¼Œåˆ·æ–°æ•°æ®\n          if (this.pointsHistoryDialogVisible) {\n            this.loadPointsHistory();\n          }\n        } else {\n          throw new Error('æœåŠ¡å™¨è¿”å›æ•°æ®æ ¼å¼é”™è¯¯');\n        }\n      } catch (error) {\n        console.error('å……å€¼å¤±è´¥:', error);\n        let errorMessage = 'å……å€¼å¤±è´¥ï¼Œè¯·é‡è¯•';\n        if (error.response && error.response.data) {\n          errorMessage = error.response.data.message || errorMessage;\n        } else if (error.message) {\n          errorMessage = error.message;\n        }\n        this.$message.error(errorMessage);\n      } finally {\n        this.rechargeLoading = false;\n      }\n    }\n  }\n};","map":{"version":3,"names":["mapActions","mapState","getUserInfo","updateUserInfo","getUserPoints","getPointsHistory","rechargePoints","name","data","avatar","loading","userInfo","user_id","user_name","email","phone","gender","age","birthday","organization","profile","points","created_at","updated_at","interestModules","friends","favoriteRobots","favoriteTools","editDialogVisible","saveLoading","editForm","UserName","Email","Phone","Gender","Age","Birthday","Organization","Profile","Password","editRules","required","message","trigger","min","max","pointsHistoryDialogVisible","pointsLoading","currentPointsTab","currentPointsPage","pointsPageSize","pointsData","rechargeDialogVisible","rechargeLoading","rechargeForm","description","rechargeRules","type","computed","filteredPointsData","filter","item","badge","paginatedPointsData","start","end","slice","totalPointsPages","Math","ceil","length","created","loadUserInfo","methods","handleLogout","$confirm","confirmButtonText","cancelButtonText","then","logout","$message","success","$router","push","catch","error","console","log","userId","userName","isLoggedIn","$store","state","user","response","pointsResponse","validateAndFormatPoints","pointsError","warn","floor","getGenderText","genderMap","formatDate","dateString","Date","toLocaleString","formatBirthday","toLocaleDateString","earnPointsDialog","$msgbox","title","dangerouslyUseHTMLString","showCancelButton","openEditDialog","resetEditForm","$refs","resetFields","saveUserInfo","validate","updateData","NewUsername","NewGender","NewAge","Error","status","errorMessage","viewPointsHistory","loadPointsHistory","records","Array","isArray","map","record","pointsChange","points_change","change_amount","amount","transactionType","transaction_type","change_type","isEarn","id","transaction_id","point_id","random","change","toString","desc","source_description","reason","time","transaction_date","timestamp","getMockPointsData","warning","switchPointsTab","tabName","handlePointsPageChange","page","allData","formatPointsAmount","getPointsTypeClass","resetPointsHistory","changePointsPage","openRechargeDialog","resetRechargeForm","setQuickAmount","submitRecharge","new_balance"],"sources":["src/views/PersonalHomePage.vue"],"sourcesContent":["<template>\n  <div class=\"personal-page\">\n    <!-- ç”¨æˆ·å¤´åƒå’ŒåŸºæœ¬ä¿¡æ¯å¡ç‰‡ -->\n    <el-card class=\"profile-card\" v-loading=\"loading\">\n      <div class=\"profile-header\">\n        <div class=\"avatar-section\">\n          <img\n            :src=\"avatar\"\n            alt=\"ç”¨æˆ·å¤´åƒ\"\n            class=\"user-avatar\"\n            @error=\"avatar = 'https://via.placeholder.com/150'\"\n          />\n          <el-button size=\"mini\" type=\"text\" class=\"change-avatar-btn\">\n            æ›´æ¢å¤´åƒ\n          </el-button>\n        </div>\n\n        <div class=\"user-info\">\n          <h2 class=\"username\">{{ userInfo.user_name || 'æœªçŸ¥ç”¨æˆ·' }}</h2>\n          <div class=\"user-details\">\n            <div class=\"info-item\">\n              <span class=\"label\">é‚®ç®±:</span>\n              <span class=\"value\">{{ userInfo.email || 'æœªè®¾ç½®' }}</span>\n            </div>\n            <div class=\"info-item\">\n              <span class=\"label\">æ‰‹æœº:</span>\n              <span class=\"value\">{{ userInfo.phone || 'æœªè®¾ç½®' }}</span>\n            </div>\n            <div class=\"info-item\">\n              <span class=\"label\">æ€§åˆ«:</span>\n              <span class=\"value\">{{ getGenderText(userInfo.gender) }}</span>\n            </div>\n            <div class=\"info-item\">\n              <span class=\"label\">å¹´é¾„:</span>\n              <span class=\"value\">{{ userInfo.age || 'æœªè®¾ç½®' }}</span>\n            </div>\n            <div class=\"info-item\">\n              <span class=\"label\">ç”Ÿæ—¥:</span>\n              <span class=\"value\">{{ formatBirthday(userInfo.birthday) }}</span>\n            </div>\n            <div class=\"info-item\">\n              <span class=\"label\">æœºæ„:</span>\n              <span class=\"value\">{{ userInfo.organization || 'æœªè®¾ç½®' }}</span>\n            </div>\n            <div class=\"info-item\">\n              <span class=\"label\">ä¸ªäººç®€ä»‹:</span>\n              <span class=\"value profile-text\">{{\n                userInfo.profile || 'æœªè®¾ç½®'\n              }}</span>\n            </div>\n            <div class=\"info-item\">\n              <span class=\"label\">æ³¨å†Œæ—¶é—´:</span>\n              <span class=\"value\">{{ formatDate(userInfo.created_at) }}</span>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"action-buttons\">\n          <el-button type=\"primary\" size=\"small\" @click=\"openEditDialog\">\n            ç¼–è¾‘èµ„æ–™\n          </el-button>\n          <el-button type=\"danger\" size=\"small\" @click=\"handleLogout\">\n            é€€å‡ºç™»å½•\n          </el-button>\n        </div>\n      </div>\n    </el-card>\n\n    <!-- ç§¯åˆ†ä¿¡æ¯å¡ç‰‡ -->\n    <el-card class=\"points-card\">\n      <div slot=\"header\" class=\"clearfix\">\n        <span class=\"card-title\">æˆ‘çš„ç§¯åˆ†</span>\n        <el-button\n          style=\"float: right; padding: 3px 0\"\n          type=\"text\"\n          @click=\"viewPointsHistory\"\n        >\n          æŸ¥çœ‹è®°å½•\n        </el-button>\n      </div>\n      <div class=\"points-info\">\n        <div class=\"points-details\">\n          <div class=\"points-item\">\n            <span class=\"points-label\">å½“å‰ç§¯åˆ†:</span>\n            <span class=\"points-value\">{{ userInfo.points || 0 }}</span>\n          </div>\n        </div>\n\n        <!-- ç§¯åˆ†æ“ä½œæŒ‰é’® -->\n        <div class=\"points-actions\">\n          <el-button size=\"small\" type=\"primary\" @click=\"earnPointsDialog\">\n            ç§¯åˆ†è¯´æ˜\n          </el-button>\n          <el-button size=\"small\" type=\"info\" @click=\"viewPointsHistory\">\n            ç§¯åˆ†æ˜ç»†\n          </el-button>\n          <el-button size=\"small\" type=\"success\" @click=\"openRechargeDialog\">\n            å……å€¼ç§¯åˆ†\n          </el-button>\n        </div>\n      </div>\n    </el-card>\n\n    <!-- å…´è¶£æ¨¡å— -->\n    <el-card class=\"interest-card\">\n      <div slot=\"header\" class=\"clearfix\">\n        <span class=\"card-title\">å…´è¶£æ¨¡å—</span>\n      </div>\n      <div class=\"interest-content\">\n        <el-tag\n          v-for=\"module in interestModules\"\n          :key=\"module\"\n          type=\"info\"\n          class=\"interest-tag\"\n        >\n          {{ module }}\n        </el-tag>\n      </div>\n    </el-card>\n\n    <!-- ç¼–è¾‘èµ„æ–™å¯¹è¯æ¡† -->\n    <el-dialog\n      title=\"ç¼–è¾‘ä¸ªäººä¿¡æ¯\"\n      :visible.sync=\"editDialogVisible\"\n      width=\"500px\"\n      @close=\"resetEditForm\"\n    >\n      <el-form\n        ref=\"editForm\"\n        :model=\"editForm\"\n        :rules=\"editRules\"\n        label-width=\"80px\"\n        v-loading=\"saveLoading\"\n      >\n        <el-form-item label=\"ç”¨æˆ·å\" prop=\"UserName\">\n          <el-input v-model=\"editForm.UserName\" placeholder=\"è¯·è¾“å…¥ç”¨æˆ·å\" />\n        </el-form-item>\n\n        <el-form-item label=\"é‚®ç®±\" prop=\"Email\">\n          <el-input\n            type=\"email\"\n            v-model=\"editForm.Email\"\n            placeholder=\"é‚®ç®±ä¸å¯ä¿®æ”¹\"\n            readonly\n            disabled\n          />\n        </el-form-item>\n\n        <el-form-item label=\"æ‰‹æœº\" prop=\"Phone\">\n          <el-input\n            v-model=\"editForm.Phone\"\n            placeholder=\"æ‰‹æœºå·ä¸å¯ä¿®æ”¹\"\n            maxlength=\"11\"\n            readonly\n            disabled\n          />\n        </el-form-item>\n\n        <el-form-item label=\"æ€§åˆ«\" prop=\"Gender\">\n          <el-select v-model=\"editForm.Gender\" placeholder=\"è¯·é€‰æ‹©æ€§åˆ«\">\n            <el-option label=\"ç”·\" :value=\"1\"></el-option>\n            <el-option label=\"å¥³\" :value=\"2\"></el-option>\n            <el-option label=\"å…¶ä»–\" :value=\"0\"></el-option>\n          </el-select>\n        </el-form-item>\n\n        <el-form-item label=\"å¹´é¾„\" prop=\"Age\">\n          <el-input-number\n            v-model=\"editForm.Age\"\n            :min=\"1\"\n            :max=\"120\"\n            placeholder=\"è¯·è¾“å…¥å¹´é¾„\"\n            style=\"width: 100%\"\n          />\n        </el-form-item>\n\n        <el-form-item label=\"ç”Ÿæ—¥\" prop=\"Birthday\">\n          <el-date-picker\n            v-model=\"editForm.Birthday\"\n            type=\"date\"\n            placeholder=\"è¯·é€‰æ‹©ç”Ÿæ—¥\"\n            style=\"width: 100%\"\n            format=\"yyyy-MM-dd\"\n            value-format=\"yyyy-MM-dd\"\n          />\n        </el-form-item>\n\n        <el-form-item label=\"æœºæ„\" prop=\"Organization\">\n          <el-input\n            v-model=\"editForm.Organization\"\n            placeholder=\"è¯·è¾“å…¥æ‰€å±æœºæ„\"\n            maxlength=\"100\"\n            show-word-limit\n          />\n        </el-form-item>\n\n        <el-form-item label=\"ä¸ªäººç®€ä»‹\" prop=\"Profile\">\n          <el-input\n            type=\"textarea\"\n            v-model=\"editForm.Profile\"\n            placeholder=\"è¯·è¾“å…¥ä¸ªäººç®€ä»‹\"\n            :rows=\"3\"\n            maxlength=\"500\"\n            show-word-limit\n          />\n        </el-form-item>\n\n        <el-form-item label=\"éªŒè¯å¯†ç \" prop=\"Password\">\n          <el-input\n            type=\"password\"\n            v-model=\"editForm.Password\"\n            placeholder=\"è¯·è¾“å…¥å½“å‰å¯†ç ä»¥éªŒè¯èº«ä»½\"\n            show-password\n          />\n        </el-form-item>\n      </el-form>\n\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"editDialogVisible = false\">å–æ¶ˆ</el-button>\n        <el-button type=\"primary\" @click=\"saveUserInfo\" :loading=\"saveLoading\">\n          ä¿å­˜\n        </el-button>\n      </div>\n    </el-dialog>\n\n    <!-- ç§¯åˆ†æ˜ç»†å¯¹è¯æ¡† -->\n    <el-dialog\n      title=\"ç§¯åˆ†æ˜ç»†\"\n      :visible.sync=\"pointsHistoryDialogVisible\"\n      width=\"800px\"\n      @close=\"resetPointsHistory\"\n    >\n      <div class=\"points-dialog-content\" v-loading=\"pointsLoading\">\n        <!-- å½“å‰ç§¯åˆ†æ˜¾ç¤º -->\n        <div class=\"current-points\">\n          <h3>\n            å½“å‰ç§¯åˆ†ï¼š<span class=\"points-highlight\">{{\n              userInfo.points || 0\n            }}</span>\n          </h3>\n        </div>\n\n        <!-- ç§¯åˆ†è¯´æ˜ -->\n        <div class=\"points-info-section\">\n          <h4>ç§¯åˆ†è¯´æ˜</h4>\n          <ul class=\"points-info-list\">\n            <li>â€¢ ç§¯åˆ†ä¸»è¦ç”¨äºè´­ä¹°æœºå™¨äººåŠŸèƒ½å’ŒæœåŠ¡</li>\n            <li>â€¢ é€šè¿‡è´¡çŒ®å†…å®¹ï¼ˆå¦‚å¼€å‘AIæœºå™¨äººï¼‰å¯è·å¾—æ¿€åŠ±ç§¯åˆ†å¥–åŠ±</li>\n            <li>â€¢ æ¯æ—¥ç­¾åˆ°å’Œå‚ä¸æ´»åŠ¨ä¹Ÿå¯è·å–ç§¯åˆ†</li>\n            <li>â€¢ ç§¯åˆ†å¯ç”¨äºè§£é”é«˜çº§æœºå™¨äººã€è´­ä¹°æœºå™¨äººæœåŠ¡ç­‰</li>\n          </ul>\n        </div>\n\n        <!-- æ ‡ç­¾é¡µåˆ‡æ¢ -->\n        <div class=\"points-tabs\">\n          <el-button\n            :type=\"currentPointsTab === 'all' ? 'primary' : 'default'\"\n            size=\"small\"\n            @click=\"switchPointsTab('all')\"\n          >\n            å…¨éƒ¨\n          </el-button>\n          <el-button\n            :type=\"currentPointsTab === 'in' ? 'success' : 'default'\"\n            size=\"small\"\n            @click=\"switchPointsTab('in')\"\n          >\n            è·å–\n          </el-button>\n          <el-button\n            :type=\"currentPointsTab === 'out' ? 'danger' : 'default'\"\n            size=\"small\"\n            @click=\"switchPointsTab('out')\"\n          >\n            æ¶ˆè€—\n          </el-button>\n        </div>\n\n        <!-- ç§¯åˆ†è®°å½•è¡¨æ ¼ -->\n        <div class=\"points-table-container\">\n          <el-table\n            :data=\"paginatedPointsData\"\n            style=\"width: 100%\"\n            stripe\n            v-if=\"paginatedPointsData.length > 0\"\n          >\n            <el-table-column prop=\"time\" label=\"æ—¶é—´\" width=\"180\">\n            </el-table-column>\n            <el-table-column prop=\"type\" label=\"ç±»å‹\" width=\"100\">\n              <template slot-scope=\"scope\">\n                <el-tag\n                  :type=\"scope.row.badge === 'in' ? 'success' : 'danger'\"\n                  size=\"small\"\n                >\n                  {{ scope.row.type }}\n                </el-tag>\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"desc\" label=\"æè¿°\"> </el-table-column>\n            <el-table-column prop=\"change\" label=\"å˜åŠ¨\" width=\"100\">\n              <template slot-scope=\"scope\">\n                <span\n                  :class=\"scope.row.badge === 'in' ? 'text-green' : 'text-red'\"\n                >\n                  {{ scope.row.change }}\n                </span>\n              </template>\n            </el-table-column>\n          </el-table>\n\n          <!-- ç©ºçŠ¶æ€ -->\n          <div v-if=\"paginatedPointsData.length === 0\" class=\"empty-state\">\n            <i class=\"el-icon-document\"></i>\n            <p>æš‚æ— ç§¯åˆ†è®°å½•</p>\n          </div>\n        </div>\n\n        <!-- åˆ†é¡µ -->\n        <div class=\"points-pagination\" v-if=\"totalPointsPages > 1\">\n          <el-pagination\n            @current-change=\"changePointsPage\"\n            :current-page=\"currentPointsPage\"\n            :page-size=\"pointsPageSize\"\n            layout=\"prev, pager, next\"\n            :total=\"filteredPointsData.length\"\n          >\n          </el-pagination>\n        </div>\n      </div>\n    </el-dialog>\n\n    <!-- å……å€¼ç§¯åˆ†å¯¹è¯æ¡† -->\n    <el-dialog\n      title=\"å……å€¼ç§¯åˆ†\"\n      :visible.sync=\"rechargeDialogVisible\"\n      width=\"500px\"\n      @close=\"resetRechargeForm\"\n    >\n      <el-form\n        ref=\"rechargeForm\"\n        :model=\"rechargeForm\"\n        :rules=\"rechargeRules\"\n        label-width=\"100px\"\n        v-loading=\"rechargeLoading\"\n      >\n        <div class=\"recharge-info\">\n          <div class=\"current-balance\">\n            <span class=\"label\">å½“å‰ç§¯åˆ†ï¼š</span>\n            <span class=\"balance\">{{ userInfo.points || 0 }}</span>\n          </div>\n\n          <div class=\"recharge-rates\">\n            <h4>å……å€¼è¯´æ˜</h4>\n            <ul>\n              <li>â€¢ æœ€ä½å……å€¼10ç§¯åˆ†ï¼Œæœ€é«˜å•æ¬¡å……å€¼10000ç§¯åˆ†</li>\n              <li>â€¢ å……å€¼çš„ç§¯åˆ†ç«‹å³åˆ°è´¦ï¼Œå¯ç”¨äºè´­ä¹°å„ç§æœåŠ¡</li>\n              <li>â€¢ å……å€¼è®°å½•å¯åœ¨ç§¯åˆ†æ˜ç»†ä¸­æŸ¥çœ‹</li>\n            </ul>\n          </div>\n        </div>\n\n        <el-form-item label=\"å……å€¼æ•°é‡\" prop=\"points\">\n          <el-input-number\n            v-model=\"rechargeForm.points\"\n            :min=\"10\"\n            :max=\"10000\"\n            :step=\"10\"\n            style=\"width: 100%\"\n            placeholder=\"è¯·è¾“å…¥å……å€¼ç§¯åˆ†æ•°é‡\"\n          />\n        </el-form-item>\n\n        <el-form-item label=\"å……å€¼è¯´æ˜\" prop=\"description\">\n          <el-input\n            v-model=\"rechargeForm.description\"\n            placeholder=\"å¯é€‰æ‹©æ·»åŠ å……å€¼è¯´æ˜\"\n            maxlength=\"100\"\n            show-word-limit\n          />\n        </el-form-item>\n\n        <div class=\"quick-amounts\">\n          <span class=\"quick-label\">å¿«é€Ÿé€‰æ‹©ï¼š</span>\n          <el-button size=\"mini\" @click=\"setQuickAmount(100)\">100</el-button>\n          <el-button size=\"mini\" @click=\"setQuickAmount(500)\">500</el-button>\n          <el-button size=\"mini\" @click=\"setQuickAmount(1000)\">1000</el-button>\n          <el-button size=\"mini\" @click=\"setQuickAmount(5000)\">5000</el-button>\n        </div>\n\n        <div class=\"recharge-preview\" v-if=\"rechargeForm.points > 0\">\n          <div class=\"preview-item\">\n            <span>å……å€¼åç§¯åˆ†ï¼š</span>\n            <span class=\"new-balance\">{{\n              (userInfo.points || 0) + rechargeForm.points\n            }}</span>\n          </div>\n        </div>\n      </el-form>\n\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"rechargeDialogVisible = false\">å–æ¶ˆ</el-button>\n        <el-button\n          type=\"primary\"\n          @click=\"submitRecharge\"\n          :loading=\"rechargeLoading\"\n        >\n          ç¡®è®¤å……å€¼\n        </el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { mapActions, mapState } from 'vuex';\nimport {\n  getUserInfo,\n  updateUserInfo,\n  getUserPoints,\n  getPointsHistory,\n  rechargePoints,\n} from '@/utils/api';\n\nexport default {\n  name: 'UserProfile',\n  data() {\n    return {\n      avatar: 'https://via.placeholder.com/150',\n      loading: true,\n      userInfo: {\n        user_id: null,\n        user_name: '',\n        email: '',\n        phone: '',\n        gender: null,\n        age: null,\n        birthday: null,\n        organization: '',\n        profile: '',\n        points: 0,\n        created_at: null,\n        updated_at: null,\n      },\n      interestModules: ['ç¼–ç¨‹', 'æ—…æ¸¸', 'å¥èº«'],\n      friends: ['ä½•é›¯å®', 'è®¸æ˜•æ ¼', 'ç‹åŠ æ·»'],\n      favoriteRobots: ['R2-D2', 'C-3PO', 'Optimus Prime'],\n      favoriteTools: ['VS Code', 'Sublime Text', 'WebStorm'],\n\n      // ç¼–è¾‘å¯¹è¯æ¡†ç›¸å…³\n      editDialogVisible: false,\n      saveLoading: false,\n      editForm: {\n        UserName: '',\n        Email: '',\n        Phone: '',\n        Gender: null,\n        Age: null,\n        Birthday: null,\n        Organization: '',\n        Profile: '',\n        Password: '', // æ·»åŠ å¯†ç å­—æ®µ\n      },\n      editRules: {\n        UserName: [\n          { required: true, message: 'è¯·è¾“å…¥ç”¨æˆ·å', trigger: 'blur' },\n          {\n            min: 3,\n            max: 20,\n            message: 'ç”¨æˆ·åé•¿åº¦åº”ä¸º3-20ä¸ªå­—ç¬¦',\n            trigger: 'blur',\n          },\n        ],\n        Organization: [\n          {\n            max: 100,\n            message: 'æœºæ„åç§°ä¸èƒ½è¶…è¿‡100ä¸ªå­—ç¬¦',\n            trigger: 'blur',\n          },\n        ],\n        Profile: [\n          {\n            max: 500,\n            message: 'ä¸ªäººç®€ä»‹ä¸èƒ½è¶…è¿‡500ä¸ªå­—ç¬¦',\n            trigger: 'blur',\n          },\n        ],\n        Password: [\n          { required: true, message: 'è¯·è¾“å…¥å½“å‰å¯†ç ', trigger: 'blur' },\n          {\n            min: 6,\n            message: 'å¯†ç é•¿åº¦è‡³å°‘6ä½',\n            trigger: 'blur',\n          },\n        ],\n      },\n\n      // ç§¯åˆ†æ˜ç»†ç›¸å…³\n      pointsHistoryDialogVisible: false,\n      pointsLoading: false,\n      currentPointsTab: 'all', // å½“å‰é€‰ä¸­çš„ç§¯åˆ†æ ‡ç­¾é¡µ\n      currentPointsPage: 1, // å½“å‰é¡µç \n      pointsPageSize: 5, // æ¯é¡µæ˜¾ç¤ºçš„è®°å½•æ•°\n      pointsData: [], // ç§¯åˆ†è®°å½•æ•°æ®\n\n      // å……å€¼ç§¯åˆ†ç›¸å…³\n      rechargeDialogVisible: false,\n      rechargeLoading: false,\n      rechargeForm: {\n        points: 100,\n        description: 'ç”¨æˆ·å……å€¼ç§¯åˆ†',\n      },\n      rechargeRules: {\n        points: [\n          { required: true, message: 'è¯·è¾“å…¥å……å€¼ç§¯åˆ†æ•°é‡', trigger: 'blur' },\n          {\n            type: 'number',\n            min: 10,\n            max: 10000,\n            message: 'å……å€¼ç§¯åˆ†éœ€åœ¨10-10000ä¹‹é—´',\n            trigger: 'blur',\n          },\n        ],\n      },\n    };\n  },\n\n  computed: {\n    ...mapState('user', ['userId', 'userName']),\n\n    // ç§¯åˆ†æ˜ç»†ç›¸å…³è®¡ç®—å±æ€§\n    filteredPointsData() {\n      if (this.currentPointsTab === 'all') {\n        return this.pointsData;\n      } else if (this.currentPointsTab === 'in') {\n        return this.pointsData.filter((item) => item.badge === 'in');\n      } else if (this.currentPointsTab === 'out') {\n        return this.pointsData.filter((item) => item.badge === 'out');\n      }\n      return this.pointsData;\n    },\n\n    paginatedPointsData() {\n      const start = (this.currentPointsPage - 1) * this.pointsPageSize;\n      const end = start + this.pointsPageSize;\n      return this.filteredPointsData.slice(start, end);\n    },\n\n    totalPointsPages() {\n      return Math.ceil(this.filteredPointsData.length / this.pointsPageSize);\n    },\n  },\n\n  async created() {\n    await this.loadUserInfo();\n  },\n\n  methods: {\n    ...mapActions('user', ['logout']),\n\n    // ç™»å‡ºåŠŸèƒ½\n    handleLogout() {\n      this.$confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ', 'ç¡®è®¤é€€å‡º', {\n        confirmButtonText: 'ç¡®å®š',\n        cancelButtonText: 'å–æ¶ˆ',\n        type: 'warning',\n      })\n        .then(async () => {\n          try {\n            // è°ƒç”¨storeä¸­çš„logout action\n            await this.logout();\n\n            this.$message.success('å·²æˆåŠŸé€€å‡ºç™»å½•');\n\n            // è·³è½¬åˆ°ç™»å½•é¡µé¢æˆ–é¦–é¡µ\n            this.$router.push('/').catch(() => {\n              // å¦‚æœæ²¡æœ‰ç™»å½•é¡µé¢ï¼Œè·³è½¬åˆ°é¦–é¡µ\n              this.$router.push('/');\n            });\n          } catch (error) {\n            console.error('é€€å‡ºç™»å½•å¤±è´¥:', error);\n            this.$message.error('é€€å‡ºç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•');\n          }\n        })\n        .catch(() => {\n          // ç”¨æˆ·å–æ¶ˆç™»å‡ºï¼Œä¸éœ€è¦å¤„ç†\n        });\n    },\n\n    async loadUserInfo() {\n      try {\n        this.loading = true;\n        console.log('å½“å‰ç”¨æˆ·çŠ¶æ€:', {\n          userId: this.userId,\n          userName: this.userName,\n          isLoggedIn: this.$store.state.user.isLoggedIn,\n        });\n\n        if (this.userId) {\n          // åŠ è½½ç”¨æˆ·åŸºæœ¬ä¿¡æ¯\n          const response = await getUserInfo(this.userId);\n          this.userInfo = response.data;\n          console.log('ç”¨æˆ·ä¿¡æ¯åŠ è½½æˆåŠŸ:', this.userInfo);\n\n          // å•ç‹¬åŠ è½½ç§¯åˆ†ä¿¡æ¯ï¼ˆæ ¹æ®åç«¯æ–‡æ¡£ï¼Œç§¯åˆ†éœ€è¦å•ç‹¬è·å–ï¼‰\n          try {\n            const pointsResponse = await getUserPoints();\n            this.userInfo.points = this.validateAndFormatPoints(\n              pointsResponse.data.points\n            );\n            console.log('ç§¯åˆ†ä¿¡æ¯åŠ è½½æˆåŠŸ:', this.userInfo.points);\n          } catch (pointsError) {\n            console.warn('ç§¯åˆ†ä¿¡æ¯åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤å€¼0:', pointsError);\n            this.userInfo.points = 0;\n          }\n        } else {\n          console.log('userIdä¸ºç©ºï¼Œå½“å‰storeçŠ¶æ€:', this.$store.state.user);\n          this.$message.error('ç”¨æˆ·IDä¸å­˜åœ¨ï¼Œè¯·é‡æ–°ç™»å½•');\n        }\n      } catch (error) {\n        console.error('åŠ è½½ç”¨æˆ·ä¿¡æ¯å¤±è´¥:', error);\n        this.$message.error(\n          'åŠ è½½ç”¨æˆ·ä¿¡æ¯å¤±è´¥ï¼š' + (error.message || 'æœªçŸ¥é”™è¯¯')\n        );\n      } finally {\n        this.loading = false;\n      }\n    },\n\n    validateAndFormatPoints(points) {\n      // éªŒè¯å’Œæ ¼å¼åŒ–ç§¯åˆ†æ•°æ®\n      if (typeof points === 'number' && points >= 0) {\n        return Math.floor(points); // ç¡®ä¿æ˜¯æ•´æ•°\n      }\n      return 0; // é»˜è®¤å€¼\n    },\n\n    getGenderText(gender) {\n      const genderMap = { 1: 'ç”·', 2: 'å¥³', 0: 'å…¶ä»–' };\n      return genderMap[gender] || 'æœªè®¾ç½®';\n    },\n\n    formatDate(dateString) {\n      if (!dateString) return 'æœªçŸ¥';\n      return new Date(dateString).toLocaleString('zh-CN');\n    },\n\n    formatBirthday(dateString) {\n      if (!dateString) return 'æœªè®¾ç½®';\n      return new Date(dateString).toLocaleDateString('zh-CN');\n    },\n\n    // ç§¯åˆ†ç›¸å…³æ–¹æ³• - ä»…ç”¨äºè´­ä¹°æœºå™¨äºº\n    // å·²åˆ é™¤ä¼šå‘˜ç­‰çº§ç›¸å…³æ–¹æ³•\n\n    earnPointsDialog() {\n      this.$msgbox({\n        title: 'ç§¯åˆ†ç”¨é€”',\n        message: `\n          <div>\n            <p>ï¿½ <strong>ç§¯åˆ†å¯ç”¨äºï¼š</strong></p>\n            <ul>\n              <li>ğŸ¤– è´­ä¹°æœºå™¨äººåŠŸèƒ½</li>\n              <li>ğŸ›’ æœºå™¨äººå¸‚åœºæ¶ˆè´¹</li>\n              <li>â­ è§£é”é«˜çº§æœºå™¨äºº</li>\n            </ul>\n            <br>\n            <p>ï¿½ğŸ’¡ <strong>å¦‚ä½•è·å–ç§¯åˆ†ï¼š</strong></p>\n            <ul>\n              <li>ğŸ¤– åˆ›å»ºæœºå™¨äººï¼š+50ç§¯åˆ†</li>\n              <li>ğŸ’¬ å‘è¡¨è¯„è®ºï¼š+10ç§¯åˆ†</li>\n              <li>ğŸ‘ è·å¾—ç‚¹èµï¼š+5ç§¯åˆ†</li>\n              <li>ğŸ“ å‘è¡¨æ–‡ç« ï¼š+30ç§¯åˆ†</li>\n              <li>ğŸ“… æ¯æ—¥ç­¾åˆ°ï¼š+10ç§¯åˆ†</li>\n            </ul>\n          </div>\n        `,\n        dangerouslyUseHTMLString: true,\n        showCancelButton: false,\n        confirmButtonText: 'çŸ¥é“äº†',\n      });\n    },\n\n    // ç¼–è¾‘ç”¨æˆ·ä¿¡æ¯ç›¸å…³æ–¹æ³•\n    openEditDialog() {\n      this.editForm = {\n        UserName: this.userInfo.user_name || '',\n        Email: this.userInfo.email || '',\n        Phone: this.userInfo.phone || '',\n        Gender: this.userInfo.gender,\n        Age: this.userInfo.age,\n        Birthday: this.userInfo.birthday || null,\n        Organization: this.userInfo.organization || '',\n        Profile: this.userInfo.profile || '',\n        Password: '', // é‡ç½®å¯†ç å­—æ®µ\n      };\n      this.editDialogVisible = true;\n    },\n\n    resetEditForm() {\n      if (this.$refs.editForm) {\n        this.$refs.editForm.resetFields();\n      }\n    },\n\n    async saveUserInfo() {\n      try {\n        await this.$refs.editForm.validate();\n        this.saveLoading = true;\n\n        // è½¬æ¢ä¸ºåç«¯æœŸæœ›çš„æ ¼å¼\n        const updateData = {\n          NewUsername: this.editForm.UserName,\n          NewGender: this.editForm.Gender,\n          NewAge: this.editForm.Age,\n          Password: this.editForm.Password, // éœ€è¦æ·»åŠ å¯†ç å­—æ®µ\n        };\n\n        console.log('å‡†å¤‡æ›´æ–°çš„æ•°æ®:', updateData);\n        console.log('ç”¨æˆ·ID:', this.userId);\n\n        const response = await updateUserInfo(this.userId, updateData);\n        console.log('APIå“åº”:', response);\n\n        // æ£€æŸ¥ä¸åŒçš„å“åº”æ ¼å¼\n        if (response && response.data) {\n          // å¦‚æœæœ‰dataå­—æ®µï¼Œæ£€æŸ¥dataä¸­çš„success\n          if (response.data.success !== false) {\n            this.$message.success('ä¸ªäººä¿¡æ¯æ›´æ–°æˆåŠŸï¼');\n            this.editDialogVisible = false;\n            await this.loadUserInfo(); // é‡æ–°åŠ è½½ç”¨æˆ·ä¿¡æ¯\n            return;\n          } else {\n            throw new Error(\n              response.data.message || response.data.error || 'æ›´æ–°å¤±è´¥'\n            );\n          }\n        } else if (\n          response &&\n          response.success !== false &&\n          response.status !== 'error'\n        ) {\n          // ç›´æ¥æ£€æŸ¥å“åº”å¯¹è±¡\n          this.$message.success('ä¸ªäººä¿¡æ¯æ›´æ–°æˆåŠŸï¼');\n          this.editDialogVisible = false;\n          await this.loadUserInfo();\n          return;\n        } else {\n          throw new Error(\n            response.message || response.error || 'æœåŠ¡å™¨è¿”å›æ›´æ–°å¤±è´¥'\n          );\n        }\n      } catch (error) {\n        console.error('ä¿å­˜ç”¨æˆ·ä¿¡æ¯è¯¦ç»†é”™è¯¯:', error);\n        console.error('é”™è¯¯å“åº”:', error.response);\n\n        let errorMessage = 'è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥';\n\n        if (error.response) {\n          // æœåŠ¡å™¨è¿”å›äº†é”™è¯¯çŠ¶æ€ç \n          if (error.response.data) {\n            errorMessage =\n              error.response.data.message ||\n              error.response.data.error ||\n              `æœåŠ¡å™¨é”™è¯¯ (${error.response.status})`;\n          } else {\n            errorMessage = `ç½‘ç»œé”™è¯¯ (${error.response.status})`;\n          }\n        } else if (error.message) {\n          // å…¶ä»–é”™è¯¯ï¼ˆåŒ…æ‹¬æˆ‘ä»¬æ‰‹åŠ¨æŠ›å‡ºçš„é”™è¯¯ï¼‰\n          errorMessage = error.message;\n        }\n\n        this.$message.error('ä¿å­˜å¤±è´¥ï¼š' + errorMessage);\n      } finally {\n        this.saveLoading = false;\n      }\n    },\n\n    // ç§¯åˆ†æ˜ç»†ç›¸å…³æ–¹æ³•\n    viewPointsHistory() {\n      this.pointsHistoryDialogVisible = true;\n      this.loadPointsHistory();\n    },\n\n    async loadPointsHistory() {\n      this.pointsLoading = true;\n      try {\n        // è°ƒç”¨çœŸå®çš„APIè·å–ç§¯åˆ†è®°å½•\n        const response = await getPointsHistory(\n          this.currentPointsPage,\n          this.pointsPageSize\n        );\n\n        console.log('ç§¯åˆ†è®°å½•APIå“åº”:', response);\n\n        if (response && response.data) {\n          // å¤„ç†APIè¿”å›çš„æ•°æ®\n          let records = response.data.records || response.data || [];\n\n          console.log('åŸå§‹è®°å½•æ•°æ®:', records);\n          console.log('ç¬¬ä¸€æ¡è®°å½•ç»“æ„:', records[0]);\n\n          // å¦‚æœAPIè¿”å›çš„æ˜¯æ•°ç»„ï¼Œç›´æ¥ä½¿ç”¨\n          if (Array.isArray(records)) {\n            // è½¬æ¢æ•°æ®æ ¼å¼ä»¥åŒ¹é…æ¨¡æ¿\n            this.pointsData = records.map((record) => {\n              console.log('æ­£åœ¨å¤„ç†è®°å½•:', record);\n\n              // æ ¹æ®åç«¯APIè¿”å›çš„å­—æ®µåè·å–å€¼\n              const pointsChange =\n                record.points_change ||\n                record.change_amount ||\n                record.amount ||\n                record.points ||\n                0;\n              const transactionType =\n                record.transaction_type ||\n                record.change_type ||\n                record.type ||\n                'unknown';\n\n              // åˆ¤æ–­æ˜¯è·å–è¿˜æ˜¯æ¶ˆè€—ç§¯åˆ†\n              const isEarn =\n                pointsChange > 0 ||\n                transactionType === 'earn' ||\n                transactionType === 'PURCHASE';\n\n              return {\n                id:\n                  record.transaction_id ||\n                  record.id ||\n                  record.point_id ||\n                  Math.random(),\n                type: isEarn ? 'è·å–' : 'æ¶ˆè€—',\n                badge: isEarn ? 'in' : 'out',\n                change:\n                  pointsChange > 0\n                    ? `+${pointsChange}`\n                    : pointsChange.toString(),\n                desc:\n                  record.source_description ||\n                  record.description ||\n                  record.reason ||\n                  record.desc ||\n                  'ç§¯åˆ†å˜åŠ¨',\n                time:\n                  record.transaction_date ||\n                  record.created_at ||\n                  record.timestamp ||\n                  record.time ||\n                  new Date().toLocaleString(),\n              };\n            });\n\n            console.log('è½¬æ¢åçš„ç§¯åˆ†æ•°æ®:', this.pointsData);\n          } else {\n            console.warn('APIè¿”å›çš„æ•°æ®æ ¼å¼ä¸æ˜¯æ•°ç»„:', records);\n            this.pointsData = this.getMockPointsData();\n          }\n        } else {\n          console.warn('APIè¿”å›æ•°æ®ä¸ºç©ºï¼Œä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®');\n          this.pointsData = this.getMockPointsData();\n        }\n      } catch (error) {\n        console.error('åŠ è½½ç§¯åˆ†è®°å½•å¤±è´¥:', error);\n        console.error('é”™è¯¯è¯¦æƒ…:', error.response);\n\n        // APIè°ƒç”¨å¤±è´¥æ—¶æ‰ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®\n        this.$message.warning('æ— æ³•åŠ è½½ç§¯åˆ†è®°å½•ï¼Œæ˜¾ç¤ºç¤ºä¾‹æ•°æ®');\n        this.pointsData = this.getMockPointsData();\n      } finally {\n        this.pointsLoading = false;\n      }\n    },\n\n    switchPointsTab(tabName) {\n      this.currentPointsTab = tabName;\n      this.currentPointsPage = 1; // åˆ‡æ¢æ ‡ç­¾é¡µæ—¶é‡ç½®é¡µç \n      this.loadPointsHistory();\n    },\n\n    handlePointsPageChange(page) {\n      this.currentPointsPage = page;\n      this.loadPointsHistory();\n    },\n\n    getMockPointsData() {\n      const allData = [\n        {\n          id: 1,\n          type: 'è·å–',\n          badge: 'in',\n          change: '+50',\n          desc: 'åˆ›å»ºæœºå™¨äººå¥–åŠ±',\n          time: '2024-01-15 10:30:00',\n        },\n        {\n          id: 2,\n          type: 'æ¶ˆè€—',\n          badge: 'out',\n          change: '-30',\n          desc: 'è´­ä¹°é«˜çº§åŠŸèƒ½',\n          time: '2024-01-14 15:45:00',\n        },\n        {\n          id: 3,\n          type: 'è·å–',\n          badge: 'in',\n          change: '+10',\n          desc: 'æ¯æ—¥ç­¾åˆ°å¥–åŠ±',\n          time: '2024-01-14 09:00:00',\n        },\n        {\n          id: 4,\n          type: 'è·å–',\n          badge: 'in',\n          change: '+30',\n          desc: 'å‘è¡¨æ–‡ç« å¥–åŠ±',\n          time: '2024-01-13 14:20:00',\n        },\n        {\n          id: 5,\n          type: 'æ¶ˆè€—',\n          badge: 'out',\n          change: '-20',\n          desc: 'è´­ä¹°æœºå™¨äºº',\n          time: '2024-01-12 11:10:00',\n        },\n        {\n          id: 6,\n          type: 'è·å–',\n          badge: 'in',\n          change: '+5',\n          desc: 'è·å¾—ç‚¹èµå¥–åŠ±',\n          time: '2024-01-11 16:30:00',\n        },\n      ];\n\n      // æ ¹æ®å½“å‰æ ‡ç­¾é¡µè¿‡æ»¤æ•°æ®\n      if (this.currentPointsTab === 'in') {\n        return allData.filter((item) => item.badge === 'in');\n      } else if (this.currentPointsTab === 'out') {\n        return allData.filter((item) => item.badge === 'out');\n      }\n      return allData;\n    },\n\n    formatPointsAmount(amount) {\n      return amount > 0 ? `+${amount}` : amount.toString();\n    },\n\n    getPointsTypeClass(type) {\n      return type === 'in' ? 'points-in' : 'points-out';\n    },\n\n    // ç§¯åˆ†å¯¹è¯æ¡†ç›¸å…³æ–¹æ³•\n    resetPointsHistory() {\n      this.currentPointsPage = 1;\n      this.currentPointsTab = 'all';\n      this.pointsData = [];\n    },\n\n    changePointsPage(page) {\n      this.currentPointsPage = page;\n    },\n\n    // å……å€¼ç§¯åˆ†ç›¸å…³æ–¹æ³•\n    openRechargeDialog() {\n      this.rechargeDialogVisible = true;\n      this.resetRechargeForm();\n    },\n\n    resetRechargeForm() {\n      if (this.$refs.rechargeForm) {\n        this.$refs.rechargeForm.resetFields();\n      }\n      this.rechargeForm = {\n        points: 100,\n        description: 'ç”¨æˆ·å……å€¼ç§¯åˆ†',\n      };\n    },\n\n    setQuickAmount(amount) {\n      this.rechargeForm.points = amount;\n    },\n\n    async submitRecharge() {\n      try {\n        await this.$refs.rechargeForm.validate();\n        this.rechargeLoading = true;\n\n        console.log('å‡†å¤‡å……å€¼ç§¯åˆ†:', this.rechargeForm);\n\n        const response = await rechargePoints(\n          this.rechargeForm.points,\n          this.rechargeForm.description\n        );\n\n        console.log('å……å€¼å“åº”:', response);\n\n        if (response && response.data) {\n          this.$message.success(\n            `å……å€¼æˆåŠŸï¼è·å¾— ${this.rechargeForm.points} ç§¯åˆ†ï¼Œå½“å‰ä½™é¢: ${response.data.new_balance}`\n          );\n\n          // æ›´æ–°ç”¨æˆ·ç§¯åˆ†æ˜¾ç¤º\n          this.userInfo.points = response.data.new_balance;\n\n          // å…³é—­å¯¹è¯æ¡†\n          this.rechargeDialogVisible = false;\n\n          // å¦‚æœç§¯åˆ†æ˜ç»†å¯¹è¯æ¡†æ˜¯æ‰“å¼€çš„ï¼Œåˆ·æ–°æ•°æ®\n          if (this.pointsHistoryDialogVisible) {\n            this.loadPointsHistory();\n          }\n        } else {\n          throw new Error('æœåŠ¡å™¨è¿”å›æ•°æ®æ ¼å¼é”™è¯¯');\n        }\n      } catch (error) {\n        console.error('å……å€¼å¤±è´¥:', error);\n\n        let errorMessage = 'å……å€¼å¤±è´¥ï¼Œè¯·é‡è¯•';\n        if (error.response && error.response.data) {\n          errorMessage = error.response.data.message || errorMessage;\n        } else if (error.message) {\n          errorMessage = error.message;\n        }\n\n        this.$message.error(errorMessage);\n      } finally {\n        this.rechargeLoading = false;\n      }\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.personal-page {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 20px;\n  background: #f5f7fa;\n  min-height: 100vh;\n}\n\n.profile-card,\n.points-card,\n.interest-card {\n  margin-bottom: 20px;\n  border-radius: 8px;\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);\n  border: 1px solid #e4e7ed;\n  background: #ffffff;\n}\n\n.profile-header {\n  display: flex;\n  align-items: flex-start;\n  gap: 30px;\n  flex-wrap: wrap;\n}\n\n.avatar-section {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 10px;\n}\n\n.user-avatar {\n  width: 120px;\n  height: 120px;\n  border-radius: 50%;\n  object-fit: cover;\n  border: 4px solid #409eff;\n  box-shadow: 0 2px 8px rgba(64, 158, 255, 0.3);\n}\n\n.change-avatar-btn {\n  color: #409eff;\n  font-size: 12px;\n}\n\n.user-info {\n  flex: 1;\n  min-width: 300px;\n}\n\n.username {\n  color: #303133;\n  margin-bottom: 20px;\n  font-size: 2em;\n  font-weight: bold;\n}\n\n.user-details {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: 15px;\n}\n\n.info-item {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  padding: 12px;\n  background: #f8f9fa;\n  border-radius: 6px;\n  border: 1px solid #e4e7ed;\n}\n\n.label {\n  font-weight: bold;\n  color: #606266;\n  min-width: 80px;\n}\n\n.value {\n  color: #303133;\n  flex: 1;\n}\n\n.profile-text {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  max-height: 60px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n}\n\n.action-buttons {\n  display: flex;\n  flex-direction: row;\n  gap: 10px;\n  align-items: center;\n  justify-content: center;\n}\n\n// ç§¯åˆ†å¡ç‰‡æ ·å¼\n.points-card {\n  background: #ffffff;\n  border-left: 4px solid #409eff;\n}\n\n.card-title {\n  font-size: 1.2em;\n  font-weight: bold;\n  color: #303133;\n}\n\n.points-info {\n  padding: 10px 0;\n}\n\n.points-details {\n  margin-bottom: 15px;\n}\n\n.points-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 8px;\n  padding: 8px 0;\n  border-bottom: 1px solid #f0f0f0;\n}\n\n.points-label {\n  color: #606266;\n  font-size: 1em;\n}\n\n.points-value {\n  color: #409eff;\n  font-weight: bold;\n  font-size: 1.2em;\n}\n\n.points-actions {\n  margin-top: 15px;\n  display: flex;\n  justify-content: space-between;\n  gap: 8px;\n}\n\n.points-actions .el-button {\n  flex: 1;\n  min-width: 0; // å…è®¸æŒ‰é’®ç¼©å°\n}\n\n// å…´è¶£æ¨¡å—æ ·å¼\n.interest-card {\n  background: #ffffff;\n  border-left: 4px solid #67c23a;\n}\n\n.interest-content {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n}\n\n.interest-tag {\n  margin: 0;\n  border-radius: 4px;\n  padding: 6px 12px;\n  background: #ecf5ff;\n  border: 1px solid #d9ecff;\n  color: #409eff;\n}\n\n// å“åº”å¼è®¾è®¡\n@media (max-width: 768px) {\n  .personal-page {\n    padding: 10px;\n  }\n\n  .profile-header {\n    flex-direction: column;\n    align-items: center;\n    text-align: center;\n  }\n\n  .user-details {\n    grid-template-columns: 1fr;\n  }\n\n  .points-actions {\n    flex-direction: column;\n  }\n}\n\n// å¯¹è¯æ¡†æ ·å¼ä¼˜åŒ–\n.el-dialog {\n  border-radius: 8px;\n}\n\n.dialog-footer {\n  text-align: center;\n}\n\n// ç§¯åˆ†æ˜ç»†æ ·å¼\n.points-dialog {\n  .el-tabs__header {\n    margin-bottom: 20px;\n  }\n\n  .points-table {\n    .points-in {\n      color: #67c23a;\n      font-weight: bold;\n    }\n\n    .points-out {\n      color: #f56c6c;\n      font-weight: bold;\n    }\n  }\n\n  .empty-state {\n    text-align: center;\n    padding: 40px 0;\n    color: #999;\n\n    .el-icon-document {\n      font-size: 64px;\n      margin-bottom: 16px;\n    }\n  }\n\n  .pagination-wrapper {\n    display: flex;\n    justify-content: center;\n    padding: 20px 0;\n  }\n}\n\n// ç§¯åˆ†æ˜ç»†å¯¹è¯æ¡†ç‰¹å®šæ ·å¼\n.points-dialog-content {\n  .current-points {\n    text-align: center;\n    margin-bottom: 20px;\n\n    h3 {\n      margin: 0;\n      color: #303133;\n    }\n\n    .points-highlight {\n      color: #409eff;\n      font-size: 1.2em;\n      font-weight: bold;\n    }\n  }\n\n  .points-info-section {\n    margin-bottom: 20px;\n\n    h4 {\n      margin: 0 0 10px 0;\n      color: #606266;\n    }\n\n    .points-info-list {\n      margin: 0;\n      padding-left: 20px;\n      color: #909399;\n\n      li {\n        margin-bottom: 5px;\n      }\n    }\n  }\n\n  .points-tabs {\n    margin-bottom: 20px;\n    text-align: center;\n\n    .el-button {\n      margin: 0 5px;\n    }\n  }\n\n  .points-table-container {\n    margin-bottom: 20px;\n  }\n\n  .text-green {\n    color: #67c23a;\n    font-weight: bold;\n  }\n\n  .text-red {\n    color: #f56c6c;\n    font-weight: bold;\n  }\n\n  .points-pagination {\n    text-align: center;\n  }\n}\n\n// å……å€¼å¯¹è¯æ¡†æ ·å¼\n.recharge-info {\n  margin-bottom: 20px;\n\n  .current-balance {\n    padding: 15px;\n    background: #f5f7fa;\n    border-radius: 6px;\n    margin-bottom: 15px;\n    text-align: center;\n\n    .label {\n      color: #606266;\n      margin-right: 10px;\n    }\n\n    .balance {\n      color: #409eff;\n      font-size: 24px;\n      font-weight: bold;\n    }\n  }\n\n  .recharge-rates {\n    h4 {\n      margin: 0 0 10px 0;\n      color: #303133;\n      font-size: 14px;\n    }\n\n    ul {\n      margin: 0;\n      padding-left: 20px;\n      color: #909399;\n      font-size: 13px;\n\n      li {\n        margin-bottom: 5px;\n      }\n    }\n  }\n}\n\n.quick-amounts {\n  margin: 15px 0;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n\n  .quick-label {\n    color: #606266;\n    font-size: 14px;\n    margin-right: 10px;\n  }\n\n  .el-button {\n    min-width: 60px;\n  }\n}\n\n.recharge-preview {\n  margin-top: 20px;\n  padding: 15px;\n  background: #f0f9ff;\n  border: 1px solid #b3d8ff;\n  border-radius: 6px;\n\n  .preview-item {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    color: #303133;\n\n    .new-balance {\n      color: #67c23a;\n      font-size: 18px;\n      font-weight: bold;\n    }\n  }\n}\n\n// ç¦ç”¨å­—æ®µæ ·å¼\n.el-form-item {\n  .el-input.is-disabled .el-input__inner {\n    background-color: #f5f7fa;\n    color: #909399;\n    cursor: not-allowed;\n  }\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}