{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { mapActions, mapState } from 'vuex';\nimport { subscribeAgent as apiSubscribeAgent } from '../utils/api';\nexport default {\n  name: 'RobotMarketPage',\n  data() {\n    return {\n      searchKeyword: '',\n      currentSearchMode: 'tag',\n      showSearchResults: false,\n      searchResults: [],\n      categoryDialogVisible: false,\n      categoryDialogTitle: '',\n      categoryDetailRobots: [],\n      subscriptionDialogVisible: false,\n      currentRobotForSubscription: null,\n      subscriptionForm: {\n        type: 'monthly',\n        duration: 1\n      },\n      subscriptionCost: 0,\n      loading: false\n    };\n  },\n  computed: {\n    ...mapState('user', ['isLoggedIn', 'userName', 'userId']),\n    ...mapState('agent', {\n      textRobots: state => state.textAgents,\n      imageRobots: state => state.imageAgents,\n      videoRobots: state => state.videoAgents,\n      haveSubscribed: state => state.haveSubscribed\n    }),\n    currentSearchModeText() {\n      const modes = {\n        tag: '按标签搜索',\n        name: '按名称搜索',\n        description: '按描述搜索'\n      };\n      return modes[this.currentSearchMode];\n    },\n    allRobots() {\n      return [...this.textRobots, ...this.imageRobots, ...this.videoRobots];\n    }\n  },\n  created() {\n    this.getAllAgentsData();\n    this.getUserSubscriptions();\n  },\n  methods: {\n    ...mapActions('agent', ['fetchAllAgentsData', 'fetchAgentDetail', 'fetchUserSubscriptions']),\n    async getAllAgentsData() {\n      this.loading = true;\n      try {\n        await this.fetchAllAgentsData();\n        console.log('获取机器人数据成功');\n      } catch (error) {\n        console.error('获取机器人数据失败:', error);\n        this.$message.error('获取机器人数据失败');\n      } finally {\n        this.loading = false;\n      }\n    },\n    async getUserSubscriptions() {\n      if (!this.userId) return;\n      try {\n        await this.fetchUserSubscriptions(this.userId);\n        console.log('获取用户订阅信息成功');\n      } catch (error) {\n        console.error('获取用户订阅信息失败:', error);\n      }\n    },\n    setSearchMode(mode) {\n      this.currentSearchMode = mode;\n      this.performSearch();\n    },\n    performSearch() {\n      if (!this.searchKeyword.trim()) {\n        this.showSearchResults = false;\n        return;\n      }\n      const keyword = this.searchKeyword.toLowerCase();\n      this.searchResults = this.allRobots.filter(robot => {\n        switch (this.currentSearchMode) {\n          case 'name':\n            return robot.name && robot.name.toLowerCase().includes(keyword);\n          case 'description':\n            return robot.description && robot.description.toLowerCase().includes(keyword);\n          case 'tag':\n          default:\n            return robot.name && robot.name.toLowerCase().includes(keyword) || robot.description && robot.description.toLowerCase().includes(keyword);\n        }\n      });\n      this.showSearchResults = true;\n    },\n    showCategoryDetail(categoryType) {\n      const titles = {\n        text: '文本对话机器人',\n        image: '图片生成机器人',\n        video: '音视频机器人'\n      };\n      this.categoryDialogTitle = titles[categoryType];\n      this.categoryDetailRobots = this.getRobotsByType(categoryType);\n      this.categoryDialogVisible = true;\n    },\n    showRobotDetail(robotId) {\n      this.$router.push({\n        name: 'RobotDetail',\n        params: {\n          id: robotId\n        }\n      });\n    },\n    subscribeRobot(robotId) {\n      if (!this.isLoggedIn) {\n        this.$message.warning('请先登录');\n        return;\n      }\n      if (this.isSubscribed(robotId)) {\n        this.$message.info('您已订阅该机器人');\n        return;\n      }\n      const robot = this.allRobots.find(r => r.id === robotId);\n      if (robot) {\n        this.currentRobotForSubscription = robot;\n        this.calculateCost();\n        this.subscriptionDialogVisible = true;\n      }\n    },\n    async confirmSubscription() {\n      if (!this.currentRobotForSubscription) return;\n      try {\n        const payload = {\n          agent_id: this.currentRobotForSubscription.id,\n          user_id: this.userId,\n          subscription_type: this.subscriptionForm.type,\n          duration: this.subscriptionForm.duration\n        };\n        const response = await apiSubscribeAgent(payload);\n        if (response.status === 200) {\n          this.$message.success('订阅成功！');\n          this.subscriptionDialogVisible = false;\n          this.getUserSubscriptions();\n        } else {\n          this.$message.error('订阅失败，请稍后重试');\n        }\n      } catch (error) {\n        console.error('订阅失败:', error);\n        this.$message.error('订阅失败，请稍后重试');\n      }\n    },\n    calculateCost() {\n      if (!this.currentRobotForSubscription) return;\n      const basePrice = this.currentRobotForSubscription.price || 100;\n      const multiplier = this.subscriptionForm.type === 'yearly' ? 10 : 1;\n      this.subscriptionCost = basePrice * multiplier * this.subscriptionForm.duration;\n    },\n    isSubscribed(robotId) {\n      return this.haveSubscribed.some(sub => sub.agent_id === robotId && sub.status);\n    },\n    getRobotsByType(type) {\n      switch (type) {\n        case 'text':\n          return this.textRobots;\n        case 'image':\n          return this.imageRobots;\n        case 'video':\n          return this.videoRobots;\n        default:\n          return [];\n      }\n    },\n    getRobotImage(type) {\n      switch (type) {\n        case 1:\n          return require('@/assets/images/Agents/textAgent.png');\n        case 2:\n          return require('@/assets/images/Agents/imageAgent.png');\n        case 3:\n          return require('@/assets/images/Agents/videoAgent.png');\n        default:\n          return require('@/assets/images/Agents/baseAgent.png');\n      }\n    },\n    truncate(text, length = 50) {\n      if (!text) return '';\n      return text.length > length ? text.slice(0, length) + '...' : text;\n    },\n    formatPrice(price) {\n      return price ? `${price} 积分` : '免费';\n    }\n  }\n};","map":{"version":3,"names":["mapActions","mapState","subscribeAgent","apiSubscribeAgent","name","data","searchKeyword","currentSearchMode","showSearchResults","searchResults","categoryDialogVisible","categoryDialogTitle","categoryDetailRobots","subscriptionDialogVisible","currentRobotForSubscription","subscriptionForm","type","duration","subscriptionCost","loading","computed","textRobots","state","textAgents","imageRobots","imageAgents","videoRobots","videoAgents","haveSubscribed","currentSearchModeText","modes","tag","description","allRobots","created","getAllAgentsData","getUserSubscriptions","methods","fetchAllAgentsData","console","log","error","$message","userId","fetchUserSubscriptions","setSearchMode","mode","performSearch","trim","keyword","toLowerCase","filter","robot","includes","showCategoryDetail","categoryType","titles","text","image","video","getRobotsByType","showRobotDetail","robotId","$router","push","params","id","subscribeRobot","isLoggedIn","warning","isSubscribed","info","find","r","calculateCost","confirmSubscription","payload","agent_id","user_id","subscription_type","response","status","success","basePrice","price","multiplier","some","sub","getRobotImage","require","truncate","length","slice","formatPrice"],"sources":["src/views/RobotMarketPage.vue"],"sourcesContent":["<template>\n  <div class=\"robot-market\">\n    <!-- 搜索区域 -->\n    <div class=\"search-container\">\n      <div class=\"search-wrapper\">\n        <div class=\"search-mode-selector\">\n          <el-dropdown @command=\"setSearchMode\">\n            <el-button class=\"search-mode-btn\">\n              {{ currentSearchModeText }}\n              <i class=\"el-icon-arrow-down\"></i>\n            </el-button>\n            <el-dropdown-menu slot=\"dropdown\">\n              <el-dropdown-item command=\"tag\">按标签搜索</el-dropdown-item>\n              <el-dropdown-item command=\"name\">按名称搜索</el-dropdown-item>\n              <el-dropdown-item command=\"description\"\n                >按描述搜索</el-dropdown-item\n              >\n            </el-dropdown-menu>\n          </el-dropdown>\n        </div>\n        <el-input\n          v-model=\"searchKeyword\"\n          class=\"search-input\"\n          placeholder=\"搜索机器人...\"\n          @input=\"performSearch\"\n          clearable\n        >\n          <el-button\n            slot=\"append\"\n            icon=\"el-icon-search\"\n            @click=\"performSearch\"\n          ></el-button>\n        </el-input>\n      </div>\n    </div>\n\n    <!-- 搜索结果 -->\n    <div v-if=\"showSearchResults\" class=\"search-results\">\n      <h2 class=\"section-title\">搜索结果 ({{ searchResults.length }})</h2>\n      <div class=\"robots-grid\">\n        <el-card\n          v-for=\"robot in searchResults\"\n          :key=\"robot.id\"\n          class=\"robot-card\"\n          @click.native=\"showRobotDetail(robot.id)\"\n        >\n          <div class=\"robot-header\">\n            <img\n              :src=\"getRobotImage(robot.type)\"\n              alt=\"robot\"\n              class=\"robot-logo\"\n            />\n            <div class=\"robot-name\">{{ robot.name }}</div>\n          </div>\n          <div class=\"robot-description\">\n            {{ truncate(robot.description, 80) }}\n          </div>\n          <div class=\"robot-rating-price\">\n            <div class=\"robot-rating\">\n              <i class=\"el-icon-star-on\" style=\"color: #ffc107\"></i>\n              {{ robot.rating || 4.5 }}\n            </div>\n            <div class=\"robot-price\">{{ formatPrice(robot.price) }}</div>\n          </div>\n          <div class=\"robot-actions\">\n            <el-button size=\"mini\" @click.stop=\"showRobotDetail(robot.id)\">\n              查看详情\n            </el-button>\n            <el-button\n              type=\"primary\"\n              size=\"mini\"\n              :class=\"{ subscribed: isSubscribed(robot.id) }\"\n              @click.stop=\"subscribeRobot(robot.id)\"\n            >\n              {{ isSubscribed(robot.id) ? '已订阅' : '订阅' }}\n            </el-button>\n          </div>\n        </el-card>\n      </div>\n    </div>\n\n    <!-- 机器人分类展示 -->\n    <div v-else class=\"robots-container\">\n      <!-- 文本机器人 -->\n      <div class=\"category-section\">\n        <div class=\"category-header\">\n          <h3 class=\"category-title\">\n            <i class=\"el-icon-document\"></i>\n            文本对话机器人\n          </h3>\n          <el-button class=\"view-more-btn\" @click=\"showCategoryDetail('text')\">\n            查看更多\n          </el-button>\n        </div>\n        <div class=\"robots-grid\">\n          <el-card\n            v-for=\"robot in textRobots.slice(0, 4)\"\n            :key=\"robot.id\"\n            class=\"robot-card\"\n            @click.native=\"showRobotDetail(robot.id)\"\n          >\n            <div class=\"robot-header\">\n              <img\n                :src=\"getRobotImage(robot.type)\"\n                alt=\"robot\"\n                class=\"robot-logo\"\n              />\n              <div class=\"robot-name\">{{ robot.name }}</div>\n            </div>\n            <div class=\"robot-description\">\n              {{ truncate(robot.description, 80) }}\n            </div>\n            <div class=\"robot-rating-price\">\n              <div class=\"robot-rating\">\n                <i class=\"el-icon-star-on\" style=\"color: #ffc107\"></i>\n                {{ robot.rating || 4.5 }}\n              </div>\n              <div class=\"robot-price\">{{ formatPrice(robot.price) }}</div>\n            </div>\n            <div class=\"robot-actions\">\n              <el-button size=\"mini\" @click.stop=\"showRobotDetail(robot.id)\">\n                查看详情\n              </el-button>\n              <el-button\n                type=\"primary\"\n                size=\"mini\"\n                :class=\"{ subscribed: isSubscribed(robot.id) }\"\n                @click.stop=\"subscribeRobot(robot.id)\"\n              >\n                {{ isSubscribed(robot.id) ? '已订阅' : '订阅' }}\n              </el-button>\n            </div>\n          </el-card>\n        </div>\n      </div>\n\n      <!-- 图像机器人 -->\n      <div class=\"category-section\">\n        <div class=\"category-header\">\n          <h3 class=\"category-title\">\n            <i class=\"el-icon-picture-outline\"></i>\n            图片生成机器人\n          </h3>\n          <el-button class=\"view-more-btn\" @click=\"showCategoryDetail('image')\">\n            查看更多\n          </el-button>\n        </div>\n        <div class=\"robots-grid\">\n          <el-card\n            v-for=\"robot in imageRobots.slice(0, 4)\"\n            :key=\"robot.id\"\n            class=\"robot-card\"\n            @click.native=\"showRobotDetail(robot.id)\"\n          >\n            <div class=\"robot-header\">\n              <img\n                :src=\"getRobotImage(robot.type)\"\n                alt=\"robot\"\n                class=\"robot-logo\"\n              />\n              <div class=\"robot-name\">{{ robot.name }}</div>\n            </div>\n            <div class=\"robot-description\">\n              {{ truncate(robot.description, 80) }}\n            </div>\n            <div class=\"robot-rating-price\">\n              <div class=\"robot-rating\">\n                <i class=\"el-icon-star-on\" style=\"color: #ffc107\"></i>\n                {{ robot.rating || 4.5 }}\n              </div>\n              <div class=\"robot-price\">{{ formatPrice(robot.price) }}</div>\n            </div>\n            <div class=\"robot-actions\">\n              <el-button size=\"mini\" @click.stop=\"showRobotDetail(robot.id)\">\n                查看详情\n              </el-button>\n              <el-button\n                type=\"primary\"\n                size=\"mini\"\n                :class=\"{ subscribed: isSubscribed(robot.id) }\"\n                @click.stop=\"subscribeRobot(robot.id)\"\n              >\n                {{ isSubscribed(robot.id) ? '已订阅' : '订阅' }}\n              </el-button>\n            </div>\n          </el-card>\n        </div>\n      </div>\n\n      <!-- 音视频机器人 -->\n      <div class=\"category-section\">\n        <div class=\"category-header\">\n          <h3 class=\"category-title\">\n            <i class=\"el-icon-video-camera\"></i>\n            音视频机器人\n          </h3>\n          <el-button class=\"view-more-btn\" @click=\"showCategoryDetail('video')\">\n            查看更多\n          </el-button>\n        </div>\n        <div class=\"robots-grid\">\n          <el-card\n            v-for=\"robot in videoRobots.slice(0, 4)\"\n            :key=\"robot.id\"\n            class=\"robot-card\"\n            @click.native=\"showRobotDetail(robot.id)\"\n          >\n            <div class=\"robot-header\">\n              <img\n                :src=\"getRobotImage(robot.type)\"\n                alt=\"robot\"\n                class=\"robot-logo\"\n              />\n              <div class=\"robot-name\">{{ robot.name }}</div>\n            </div>\n            <div class=\"robot-description\">\n              {{ truncate(robot.description, 80) }}\n            </div>\n            <div class=\"robot-rating-price\">\n              <div class=\"robot-rating\">\n                <i class=\"el-icon-star-on\" style=\"color: #ffc107\"></i>\n                {{ robot.rating || 4.5 }}\n              </div>\n              <div class=\"robot-price\">{{ formatPrice(robot.price) }}</div>\n            </div>\n            <div class=\"robot-actions\">\n              <el-button size=\"mini\" @click.stop=\"showRobotDetail(robot.id)\">\n                查看详情\n              </el-button>\n              <el-button\n                type=\"primary\"\n                size=\"mini\"\n                :class=\"{ subscribed: isSubscribed(robot.id) }\"\n                @click.stop=\"subscribeRobot(robot.id)\"\n              >\n                {{ isSubscribed(robot.id) ? '已订阅' : '订阅' }}\n              </el-button>\n            </div>\n          </el-card>\n        </div>\n      </div>\n    </div>\n\n    <!-- 分类详情对话框 -->\n    <el-dialog\n      :title=\"categoryDialogTitle\"\n      :visible.sync=\"categoryDialogVisible\"\n      width=\"80%\"\n      center\n    >\n      <div class=\"category-detail-grid\">\n        <el-card\n          v-for=\"robot in categoryDetailRobots\"\n          :key=\"robot.id\"\n          class=\"robot-card\"\n          @click.native=\"showRobotDetail(robot.id)\"\n        >\n          <div class=\"robot-header\">\n            <img\n              :src=\"getRobotImage(robot.type)\"\n              alt=\"robot\"\n              class=\"robot-logo\"\n            />\n            <div class=\"robot-name\">{{ robot.name }}</div>\n          </div>\n          <div class=\"robot-description\">\n            {{ truncate(robot.description, 80) }}\n          </div>\n          <div class=\"robot-rating-price\">\n            <div class=\"robot-rating\">\n              <i class=\"el-icon-star-on\" style=\"color: #ffc107\"></i>\n              {{ robot.rating || 4.5 }}\n            </div>\n            <div class=\"robot-price\">{{ formatPrice(robot.price) }}</div>\n          </div>\n          <div class=\"robot-actions\">\n            <el-button size=\"mini\" @click.stop=\"showRobotDetail(robot.id)\">\n              查看详情\n            </el-button>\n            <el-button\n              type=\"primary\"\n              size=\"mini\"\n              :class=\"{ subscribed: isSubscribed(robot.id) }\"\n              @click.stop=\"subscribeRobot(robot.id)\"\n            >\n              {{ isSubscribed(robot.id) ? '已订阅' : '订阅' }}\n            </el-button>\n          </div>\n        </el-card>\n      </div>\n    </el-dialog>\n\n    <!-- 订阅确认对话框 -->\n    <el-dialog\n      title=\"订阅确认\"\n      :visible.sync=\"subscriptionDialogVisible\"\n      width=\"400px\"\n      center\n    >\n      <div v-if=\"currentRobotForSubscription\" class=\"subscription-info\">\n        <div class=\"subscription-robot-name\">\n          {{ currentRobotForSubscription.name }}\n        </div>\n        <el-form :model=\"subscriptionForm\" label-width=\"80px\">\n          <el-form-item label=\"订阅类型\">\n            <el-select v-model=\"subscriptionForm.type\" @change=\"calculateCost\">\n              <el-option label=\"月度订阅\" value=\"monthly\"></el-option>\n              <el-option label=\"年度订阅\" value=\"yearly\"></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"订阅时长\">\n            <el-input-number\n              v-model=\"subscriptionForm.duration\"\n              :min=\"1\"\n              :max=\"12\"\n              @change=\"calculateCost\"\n            ></el-input-number>\n          </el-form-item>\n        </el-form>\n        <div class=\"subscription-cost\">\n          <div class=\"subscription-cost-label\">总费用</div>\n          <div class=\"subscription-cost-value\">{{ subscriptionCost }} 积分</div>\n        </div>\n      </div>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"subscriptionDialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"confirmSubscription\">\n          确认订阅\n        </el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { mapActions, mapState } from 'vuex';\nimport { subscribeAgent as apiSubscribeAgent } from '../utils/api';\n\nexport default {\n  name: 'RobotMarketPage',\n  data() {\n    return {\n      searchKeyword: '',\n      currentSearchMode: 'tag',\n      showSearchResults: false,\n      searchResults: [],\n      categoryDialogVisible: false,\n      categoryDialogTitle: '',\n      categoryDetailRobots: [],\n      subscriptionDialogVisible: false,\n      currentRobotForSubscription: null,\n      subscriptionForm: {\n        type: 'monthly',\n        duration: 1,\n      },\n      subscriptionCost: 0,\n      loading: false,\n    };\n  },\n  computed: {\n    ...mapState('user', ['isLoggedIn', 'userName', 'userId']),\n    ...mapState('agent', {\n      textRobots: (state) => state.textAgents,\n      imageRobots: (state) => state.imageAgents,\n      videoRobots: (state) => state.videoAgents,\n      haveSubscribed: (state) => state.haveSubscribed,\n    }),\n    currentSearchModeText() {\n      const modes = {\n        tag: '按标签搜索',\n        name: '按名称搜索',\n        description: '按描述搜索',\n      };\n      return modes[this.currentSearchMode];\n    },\n    allRobots() {\n      return [...this.textRobots, ...this.imageRobots, ...this.videoRobots];\n    },\n  },\n  created() {\n    this.getAllAgentsData();\n    this.getUserSubscriptions();\n  },\n  methods: {\n    ...mapActions('agent', [\n      'fetchAllAgentsData',\n      'fetchAgentDetail',\n      'fetchUserSubscriptions',\n    ]),\n    async getAllAgentsData() {\n      this.loading = true;\n      try {\n        await this.fetchAllAgentsData();\n        console.log('获取机器人数据成功');\n      } catch (error) {\n        console.error('获取机器人数据失败:', error);\n        this.$message.error('获取机器人数据失败');\n      } finally {\n        this.loading = false;\n      }\n    },\n    async getUserSubscriptions() {\n      if (!this.userId) return;\n      try {\n        await this.fetchUserSubscriptions(this.userId);\n        console.log('获取用户订阅信息成功');\n      } catch (error) {\n        console.error('获取用户订阅信息失败:', error);\n      }\n    },\n    setSearchMode(mode) {\n      this.currentSearchMode = mode;\n      this.performSearch();\n    },\n    performSearch() {\n      if (!this.searchKeyword.trim()) {\n        this.showSearchResults = false;\n        return;\n      }\n\n      const keyword = this.searchKeyword.toLowerCase();\n      this.searchResults = this.allRobots.filter((robot) => {\n        switch (this.currentSearchMode) {\n          case 'name':\n            return robot.name && robot.name.toLowerCase().includes(keyword);\n          case 'description':\n            return (\n              robot.description &&\n              robot.description.toLowerCase().includes(keyword)\n            );\n          case 'tag':\n          default:\n            return (\n              (robot.name && robot.name.toLowerCase().includes(keyword)) ||\n              (robot.description &&\n                robot.description.toLowerCase().includes(keyword))\n            );\n        }\n      });\n      this.showSearchResults = true;\n    },\n    showCategoryDetail(categoryType) {\n      const titles = {\n        text: '文本对话机器人',\n        image: '图片生成机器人',\n        video: '音视频机器人',\n      };\n      this.categoryDialogTitle = titles[categoryType];\n      this.categoryDetailRobots = this.getRobotsByType(categoryType);\n      this.categoryDialogVisible = true;\n    },\n    showRobotDetail(robotId) {\n      this.$router.push({ name: 'RobotDetail', params: { id: robotId } });\n    },\n    subscribeRobot(robotId) {\n      if (!this.isLoggedIn) {\n        this.$message.warning('请先登录');\n        return;\n      }\n\n      if (this.isSubscribed(robotId)) {\n        this.$message.info('您已订阅该机器人');\n        return;\n      }\n\n      const robot = this.allRobots.find((r) => r.id === robotId);\n      if (robot) {\n        this.currentRobotForSubscription = robot;\n        this.calculateCost();\n        this.subscriptionDialogVisible = true;\n      }\n    },\n    async confirmSubscription() {\n      if (!this.currentRobotForSubscription) return;\n\n      try {\n        const payload = {\n          agent_id: this.currentRobotForSubscription.id,\n          user_id: this.userId,\n          subscription_type: this.subscriptionForm.type,\n          duration: this.subscriptionForm.duration,\n        };\n\n        const response = await apiSubscribeAgent(payload);\n        if (response.status === 200) {\n          this.$message.success('订阅成功！');\n          this.subscriptionDialogVisible = false;\n          this.getUserSubscriptions();\n        } else {\n          this.$message.error('订阅失败，请稍后重试');\n        }\n      } catch (error) {\n        console.error('订阅失败:', error);\n        this.$message.error('订阅失败，请稍后重试');\n      }\n    },\n    calculateCost() {\n      if (!this.currentRobotForSubscription) return;\n\n      const basePrice = this.currentRobotForSubscription.price || 100;\n      const multiplier = this.subscriptionForm.type === 'yearly' ? 10 : 1;\n      this.subscriptionCost =\n        basePrice * multiplier * this.subscriptionForm.duration;\n    },\n    isSubscribed(robotId) {\n      return this.haveSubscribed.some(\n        (sub) => sub.agent_id === robotId && sub.status\n      );\n    },\n    getRobotsByType(type) {\n      switch (type) {\n        case 'text':\n          return this.textRobots;\n        case 'image':\n          return this.imageRobots;\n        case 'video':\n          return this.videoRobots;\n        default:\n          return [];\n      }\n    },\n    getRobotImage(type) {\n      switch (type) {\n        case 1:\n          return require('@/assets/images/Agents/textAgent.png');\n        case 2:\n          return require('@/assets/images/Agents/imageAgent.png');\n        case 3:\n          return require('@/assets/images/Agents/videoAgent.png');\n        default:\n          return require('@/assets/images/Agents/baseAgent.png');\n      }\n    },\n    truncate(text, length = 50) {\n      if (!text) return '';\n      return text.length > length ? text.slice(0, length) + '...' : text;\n    },\n    formatPrice(price) {\n      return price ? `${price} 积分` : '免费';\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@use '@/assets/styles/variables.scss' as *;\n\n.robot-market {\n  padding: 20px;\n  min-height: 100vh;\n\n  .search-container {\n    background: white;\n    padding: 20px;\n    margin-bottom: 20px;\n    border-radius: 8px;\n    box-shadow: $box-shadow-light;\n\n    .search-wrapper {\n      display: flex;\n      align-items: center;\n      gap: 0;\n      max-width: 800px;\n\n      .search-mode-selector {\n        min-width: 120px;\n\n        .search-mode-btn {\n          border-radius: 6px 0 0 6px;\n          background: $accent-color;\n          color: white;\n          border-color: $accent-color;\n\n          &:hover {\n            background: $accent-hover-color;\n            border-color: $accent-hover-color;\n          }\n        }\n      }\n\n      .search-input {\n        flex: 1;\n\n        :deep(.el-input__inner) {\n          border-radius: 0;\n          border-left: none;\n        }\n\n        :deep(.el-input-group__append) {\n          border-radius: 0 6px 6px 0;\n          background: $accent-color;\n          color: white;\n          border-color: $accent-color;\n\n          &:hover {\n            background: $accent-hover-color;\n          }\n        }\n      }\n    }\n  }\n\n  .search-results,\n  .robots-container {\n    .section-title {\n      font-size: 1.5rem;\n      color: $text-color;\n      margin-bottom: 20px;\n      text-align: center;\n    }\n\n    .category-section {\n      margin-bottom: 40px;\n\n      .category-header {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        margin-bottom: 20px;\n\n        .category-title {\n          font-size: 1.2rem;\n          color: $text-color;\n          font-weight: 600;\n          display: flex;\n          align-items: center;\n          gap: 8px;\n\n          i {\n            color: $accent-color;\n          }\n        }\n\n        .view-more-btn {\n          background: white;\n          color: $text-color;\n          border: 1px solid $border-color;\n          border-radius: 20px;\n          padding: 8px 16px;\n\n          &:hover {\n            background: $accent-color;\n            color: white;\n            border-color: $accent-color;\n          }\n        }\n      }\n    }\n\n    .robots-grid {\n      display: grid;\n      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\n      gap: 20px;\n    }\n  }\n\n  .robot-card {\n    cursor: pointer;\n    transition: all 0.3s ease;\n    border: 1px solid $border-color;\n\n    &:hover {\n      transform: translateY(-5px);\n      box-shadow: $box-shadow-medium;\n    }\n\n    .robot-header {\n      display: flex;\n      align-items: center;\n      gap: 10px;\n      margin-bottom: 10px;\n\n      .robot-logo {\n        width: 40px;\n        height: 40px;\n        border-radius: 50%;\n        object-fit: cover;\n      }\n\n      .robot-name {\n        font-size: 1rem;\n        font-weight: 600;\n        color: $text-color;\n        flex: 1;\n      }\n    }\n\n    .robot-description {\n      color: $secondary-color;\n      font-size: 0.9rem;\n      line-height: 1.4;\n      margin-bottom: 15px;\n      min-height: 40px;\n    }\n\n    .robot-rating-price {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 15px;\n      font-size: 0.9rem;\n\n      .robot-rating {\n        display: flex;\n        align-items: center;\n        gap: 4px;\n        color: #ffc107;\n      }\n\n      .robot-price {\n        color: $text-color;\n        font-weight: 500;\n      }\n    }\n\n    .robot-actions {\n      display: flex;\n      gap: 8px;\n\n      .el-button {\n        flex: 1;\n\n        &.subscribed {\n          background: #28a745;\n          border-color: #28a745;\n        }\n      }\n    }\n  }\n\n  .category-detail-grid {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));\n    gap: 15px;\n    max-height: 60vh;\n    overflow-y: auto;\n  }\n\n  .subscription-info {\n    .subscription-robot-name {\n      font-size: 1.2rem;\n      font-weight: 600;\n      margin-bottom: 20px;\n      color: $text-color;\n    }\n\n    .subscription-cost {\n      background: $background-color;\n      padding: 15px;\n      border-radius: 6px;\n      margin-top: 20px;\n\n      .subscription-cost-label {\n        font-weight: 500;\n        color: $secondary-color;\n        margin-bottom: 5px;\n      }\n\n      .subscription-cost-value {\n        font-size: 1.2rem;\n        font-weight: 600;\n        color: $accent-color;\n      }\n    }\n  }\n}\n\n@media (max-width: 768px) {\n  .robot-market {\n    padding: 10px;\n\n    .search-container {\n      padding: 15px;\n\n      .search-wrapper {\n        flex-direction: column;\n        gap: 10px;\n\n        .search-mode-selector {\n          width: 100%;\n\n          .search-mode-btn {\n            border-radius: 6px;\n          }\n        }\n\n        .search-input {\n          width: 100%;\n\n          :deep(.el-input__inner) {\n            border-radius: 6px 0 0 6px;\n            border: 1px solid $border-color;\n          }\n\n          :deep(.el-input-group__append) {\n            border-radius: 0 6px 6px 0;\n          }\n        }\n      }\n    }\n\n    .robots-grid {\n      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\n      gap: 15px;\n    }\n  }\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}