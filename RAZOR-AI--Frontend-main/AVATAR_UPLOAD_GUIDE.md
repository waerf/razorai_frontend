# 头像上传功能快速启动指南

## 🚀 超简单启动方式

现在您可以像以前一样使用熟悉的命令启动，Python服务会自动启动：

```bash
# 使用yarn（推荐）
yarn serve

# 或使用npm
npm run serve
```

## ✨ 自动化功能

当您运行 `yarn serve` 时，系统会：
1. ✅ 自动启动Vue前端服务 (http://localhost:8080)
2. ✅ 自动启动Python图片上传代理服务 (http://localhost:5000)
3. ✅ 在控制台显示启动状态
4. ✅ 在退出时自动清理Python进程

**无需任何额外操作！** 🎉

## 🎨 新增图像裁剪功能

现在支持智能头像裁剪：

### 裁剪特性
- 🔲 **可视化裁剪框**: 拖动调整裁剪区域
- 🔄 **图像操作**: 支持旋转、缩放、移动
- ⭕ **圆形预览**: 实时显示圆形头像效果
- 📐 **固定比例**: 1:1正方形裁剪，确保头像质量
- 🎯 **精确控制**: 鼠标拖拽 + 滚轮缩放 + 控制按钮

### 使用方法
1. 点击头像上的"更换头像"按钮
2. 选择图片文件
3. 在裁剪器中调整图片：
   - **拖动图片**: 调整图片位置
   - **拖动边框**: 调整裁剪框大小
   - **滚轮缩放**: 放大/缩小图片
   - **控制按钮**: 左转/右转/放大/缩小
4. 查看右侧圆形预览效果
5. 点击"确认更换"完成上传

## 💡 工作原理

- Vue配置文件 (`vue.config.js`) 已被修改，在开发服务器启动时自动启动Python服务
- Python服务在后台运行，提供图片上传代理功能
- vue-cropper组件提供专业的图像裁剪功能
- 所有错误处理和进程管理都是自动的

## 🛠️ 技术栈

- **前端**: Vue.js + Element UI + vue-cropper
- **图像处理**: Canvas + Blob API
- **上传代理**: Python Flask + PicGo API
- **图床服务**: PicGo图床 (支持多种重试策略)

## 📋 功能特性

- 🚀 一键启动，无需手动运行Python服务
- ✂️ 专业图像裁剪，支持圆形头像预览
- 🔄 智能重复上传处理（自动重试、图片修改）
- 🌐 绕过CORS限制的图片上传代理
- 📷 支持多种图片格式 (JPG、PNG、GIF、WebP)
- 🛡️ 完善的错误处理和用户提示
- 📐 固定1:1比例裁剪，确保头像质量

## 📦 依赖要求

- Node.js 和 npm/yarn
- Python 3.7+
- pip (Python包管理器)

系统会自动检查并安装所需的Python依赖。

系统会自动检查并安装所需的Python依赖。

## 故障排除

如果遇到问题：

1. 确保Python已安装并添加到PATH
2. 确保pip可用
3. 手动安装依赖：`pip install -r requirements.txt`
4. 检查端口5000和8080是否被占用
